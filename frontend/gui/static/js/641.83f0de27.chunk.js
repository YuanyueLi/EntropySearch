(self.webpackChunkentropy_search=self.webpackChunkentropy_search||[]).push([[641],{1641:function(t,e,i){var r=i(5879),n=i(9128),s=i(2992),a=i(4310),o=i(7849),h=i(3465),l=!("undefined"===typeof window||!window.document||!window.document.createElement),u={Version:"1.0.0"};u.Drawer=r,u.Parser=n,u.SvgDrawer=a,u.ReactionDrawer=o,u.ReactionParser=s,u.clean=function(t){return t.replace(/[^A-Za-z0-9@\.\+\-\?!\(\)\[\]\{\}/\\=#\$:\*]/g,"")},u.apply=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"canvas[data-smiles]",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=new r(t),a=document.querySelectorAll(e),o=function(){var t=a[h];u.parse(t.getAttribute("data-smiles"),(function(e){s.draw(e,t,i,!1)}),(function(t){n&&n(t)}))},h=0;h<a.length;h++)o()},u.parse=function(t,e,i){try{e&&e(n.parse(t))}catch(r){i&&i(r)}},u.parseReaction=function(t,e,i){try{e&&e(s.parse(t))}catch(r){i&&i(r)}},l&&(window.SmilesDrawer=u,window.SmiDrawer=h),u.SmiDrawer=h,Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),i=e.length>>>0,r=arguments[1]>>0,n=r<0?Math.max(i+r,0):Math.min(r,i),s=arguments[2],a=void 0===s?i:s>>0,o=a<0?Math.max(i+a,0):Math.min(a,i);n<o;)e[n]=t,n++;return e}}),t.exports=u},9521:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=function(){"use strict";function t(){r(this,t)}return n(t,null,[{key:"clone",value:function(e){var i=Array.isArray(e)?Array():{};for(var r in e){var n=e[r];"function"===typeof n.clone?i[r]=n.clone():i[r]="object"===typeof n?t.clone(n):n}return i}},{key:"equals",value:function(t,e){if(t.length!==e.length)return!1;for(var i=t.slice().sort(),r=e.slice().sort(),n=0;n<i.length;n++)if(i[n]!==r[n])return!1;return!0}},{key:"print",value:function(t){if(0==t.length)return"";for(var e="(",i=0;i<t.length;i++)e+=t[i].id?t[i].id+", ":t[i]+", ";return(e=e.substring(0,e.length-2))+")"}},{key:"each",value:function(t,e){for(var i=0;i<t.length;i++)e(t[i])}},{key:"get",value:function(t,e,i){for(var r=0;r<t.length;r++)if(t[r][e]==i)return t[r]}},{key:"contains",value:function(t,e){if(e.property||e.func){if(e.func){for(var i=0;i<t.length;i++)if(e.func(t[i]))return!0}else for(var r=0;r<t.length;r++)if(t[r][e.property]==e.value)return!0}else for(var n=0;n<t.length;n++)if(t[n]==e.value)return!0;return!1}},{key:"intersection",value:function(t,e){for(var i=new Array,r=0;r<t.length;r++)for(var n=0;n<e.length;n++)t[r]===e[n]&&i.push(t[r]);return i}},{key:"unique",value:function(t){var e={};return t.filter((function(t){return void 0===e[t]&&(e[t]=!0)}))}},{key:"count",value:function(t,e){for(var i=0,r=0;r<t.length;r++)t[r]===e&&i++;return i}},{key:"toggle",value:function(t,e){for(var i=Array(),r=!1,n=0;n<t.length;n++)t[n]!==e?i.push(t[n]):r=!0;return r||i.push(e),i}},{key:"remove",value:function(t,e){for(var i=Array(),r=0;r<t.length;r++)t[r]!==e&&i.push(t[r]);return i}},{key:"removeUnique",value:function(t,e){var i=t.indexOf(e);return i>-1&&t.splice(i,1),t}},{key:"removeAll",value:function(t,e){return t.filter((function(t){return-1===e.indexOf(t)}))}},{key:"merge",value:function(t,e){for(var i=new Array(t.length+e.length),r=0;r<t.length;r++)i[r]=t[r];for(var n=0;n<e.length;n++)i[t.length+n]=e[n];return i}},{key:"containsAll",value:function(t,e){for(var i=0,r=0;r<t.length;r++)for(var n=0;n<e.length;n++)t[r]===e[n]&&i++;return i===e.length}},{key:"sortByAtomicNumberDesc",value:function(t){var e=t.map((function(t,e){return{index:e,value:t.atomicNumber.split(".").map(Number)}}));return e.sort((function(t,e){for(var i=Math.min(e.value.length,t.value.length),r=0;r<i&&e.value[r]===t.value[r];)r++;return r===i?e.value.length-t.value.length:e.value[r]-t.value[r]})),e.map((function(e){return t[e.index]}))}},{key:"deepCopy",value:function(e){for(var i=Array(),r=0;r<e.length;r++){var n=e[r];i[r]=n instanceof Array?t.deepCopy(n):n}return i}}]),t}();t.exports=s},8666:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=i(9521),a=(i(1965),i(648),function(){"use strict";function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";r(this,t),this.element=1===e.length?e.toUpperCase():e,this.drawExplicit=!1,this.ringbonds=Array(),this.rings=Array(),this.bondType=i,this.branchBond=null,this.isBridge=!1,this.isBridgeNode=!1,this.originalRings=Array(),this.bridgedRing=null,this.anchoredRings=Array(),this.bracket=null,this.plane=0,this.attachedPseudoElements={},this.hasAttachedPseudoElements=!1,this.isDrawn=!0,this.isConnectedToRing=!1,this.neighbouringElements=Array(),this.isPartOfAromaticRing=e!==this.element,this.bondCount=0,this.chirality="",this.isStereoCenter=!1,this.priority=0,this.mainChain=!1,this.hydrogenDirection="down",this.subtreeDepth=1,this.hasHydrogen=!1,this.class=void 0}return n(t,[{key:"addNeighbouringElement",value:function(t){this.neighbouringElements.push(t)}},{key:"attachPseudoElement",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;null===i&&(i=0),null===r&&(r=0);var n=i+t+r;this.attachedPseudoElements[n]?this.attachedPseudoElements[n].count+=1:this.attachedPseudoElements[n]={element:t,count:1,hydrogenCount:i,previousElement:e,charge:r},this.hasAttachedPseudoElements=!0}},{key:"getAttachedPseudoElements",value:function(){var t={},e=this;return Object.keys(this.attachedPseudoElements).sort().forEach((function(i){t[i]=e.attachedPseudoElements[i]})),t}},{key:"getAttachedPseudoElementsCount",value:function(){return Object.keys(this.attachedPseudoElements).length}},{key:"isHeteroAtom",value:function(){return"C"!==this.element&&"H"!==this.element}},{key:"addAnchoredRing",value:function(t){s.contains(this.anchoredRings,{value:t})||this.anchoredRings.push(t)}},{key:"getRingbondCount",value:function(){return this.ringbonds.length}},{key:"backupRings",value:function(){this.originalRings=Array(this.rings.length);for(var t=0;t<this.rings.length;t++)this.originalRings[t]=this.rings[t]}},{key:"restoreRings",value:function(){this.rings=Array(this.originalRings.length);for(var t=0;t<this.originalRings.length;t++)this.rings[t]=this.originalRings[t]}},{key:"haveCommonRingbond",value:function(t,e){for(var i=0;i<t.ringbonds.length;i++)for(var r=0;r<e.ringbonds.length;r++)if(t.ringbonds[i].id==e.ringbonds[r].id)return!0;return!1}},{key:"neighbouringElementsEqual",value:function(t){if(t.length!==this.neighbouringElements.length)return!1;t.sort(),this.neighbouringElements.sort();for(var e=0;e<this.neighbouringElements.length;e++)if(t[e]!==this.neighbouringElements[e])return!1;return!0}},{key:"getAtomicNumber",value:function(){return t.atomicNumbers[this.element]}},{key:"getMaxBonds",value:function(){return t.maxBonds[this.element]}}],[{key:"maxBonds",get:function(){return{H:1,C:4,N:3,O:2,P:3,S:2,B:3,F:1,I:1,Cl:1,Br:1}}},{key:"atomicNumbers",get:function(){return{H:1,He:2,Li:3,Be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,p:15,S:16,s:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Uut:113,Uuq:114,Uup:115,Uuh:116,Uus:117,Uuo:118}}},{key:"mass",get:function(){return{H:1,He:2,Li:3,Be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,p:15,S:16,s:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Uut:113,Uuq:114,Uup:115,Uuh:116,Uus:117,Uuo:118}}}]),t}());t.exports=a},8888:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=i(5013),a=i(8357),o=(i(1423),i(1965),i(648),i(2914).getChargeText),h=function(){"use strict";function t(e,i,n){r(this,t),this.canvas="string"===typeof e||e instanceof String?document.getElementById(e):e,this.ctx=this.canvas.getContext("2d"),this.themeManager=i,this.opts=n,this.drawingWidth=0,this.drawingHeight=0,this.offsetX=0,this.offsetY=0,this.fontLarge=this.opts.fontSizeLarge+"pt Helvetica, Arial, sans-serif",this.fontSmall=this.opts.fontSizeSmall+"pt Helvetica, Arial, sans-serif",this.updateSize(this.opts.width,this.opts.height),this.ctx.font=this.fontLarge,this.hydrogenWidth=this.ctx.measureText("H").width,this.halfHydrogenWidth=this.hydrogenWidth/2,this.halfBondThickness=this.opts.bondThickness/2}return n(t,[{key:"updateSize",value:function(t,e){this.devicePixelRatio=window.devicePixelRatio||1,this.backingStoreRatio=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,this.ratio=this.devicePixelRatio/this.backingStoreRatio,1!==this.ratio?(this.canvas.width=t*this.ratio,this.canvas.height=e*this.ratio,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.ctx.setTransform(this.ratio,0,0,this.ratio,0,0)):(this.canvas.width=t*this.ratio,this.canvas.height=e*this.ratio)}},{key:"setTheme",value:function(t){this.colors=t}},{key:"scale",value:function(t){for(var e=-Number.MAX_VALUE,i=-Number.MAX_VALUE,r=Number.MAX_VALUE,n=Number.MAX_VALUE,s=0;s<t.length;s++)if(t[s].value.isDrawn){var a=t[s].position;e<a.x&&(e=a.x),i<a.y&&(i=a.y),r>a.x&&(r=a.x),n>a.y&&(n=a.y)}var o=this.opts.padding;e+=o,i+=o,r-=o,n-=o,this.drawingWidth=e-r,this.drawingHeight=i-n;var h=this.canvas.offsetWidth/this.drawingWidth,l=this.canvas.offsetHeight/this.drawingHeight,u=h<l?h:l;this.ctx.scale(u,u),this.offsetX=-r,this.offsetY=-n,h<l?this.offsetY+=this.canvas.offsetHeight/(2*u)-this.drawingHeight/2:this.offsetX+=this.canvas.offsetWidth/(2*u)-this.drawingWidth/2}},{key:"reset",value:function(){this.ctx.setTransform(1,0,0,1,0,0)}},{key:"getColor",value:function(t){return(t=t.toUpperCase())in this.colors?this.colors[t]:this.colors.C}},{key:"drawCircle",value:function(t,e,i,r){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",h=this.ctx,l=this.offsetX,u=this.offsetY;h.save(),h.lineWidth=1.5,h.beginPath(),h.arc(t+l,e+u,i,0,s.twoPI,!0),h.closePath(),a?(n?(h.fillStyle="#f00",h.fill()):(h.strokeStyle="#f00",h.stroke()),this.drawDebugText(t,e,o)):n?(h.fillStyle=r,h.fill()):(h.strokeStyle=r,h.stroke()),h.restore()}},{key:"drawLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.ctx,n=this.offsetX,s=this.offsetY,a=t.clone().shorten(4),o=a.getLeftVector().clone(),h=a.getRightVector().clone();o.x+=n,o.y+=s,h.x+=n,h.y+=s,e||(r.save(),r.globalCompositeOperation="destination-out",r.beginPath(),r.moveTo(o.x,o.y),r.lineTo(h.x,h.y),r.lineCap="round",r.lineWidth=this.opts.bondThickness+1.2,r.strokeStyle=this.themeManager.getColor("BACKGROUND"),r.stroke(),r.globalCompositeOperation="source-over",r.restore()),o=t.getLeftVector().clone(),h=t.getRightVector().clone(),o.x+=n,o.y+=s,h.x+=n,h.y+=s,r.save(),r.beginPath(),r.moveTo(o.x,o.y),r.lineTo(h.x,h.y),r.lineCap="round",r.lineWidth=this.opts.bondThickness;var l=this.ctx.createLinearGradient(o.x,o.y,h.x,h.y);l.addColorStop(.4,this.themeManager.getColor(t.getLeftElement())||this.themeManager.getColor("C")),l.addColorStop(.6,this.themeManager.getColor(t.getRightElement())||this.themeManager.getColor("C")),e&&(r.setLineDash([1,1.5]),r.lineWidth=this.opts.bondThickness/1.5),i<1&&(r.globalAlpha=i),r.strokeStyle=l,r.stroke(),r.restore()}},{key:"drawWedge",value:function(t){if(!(isNaN(t.from.x)||isNaN(t.from.y)||isNaN(t.to.x)||isNaN(t.to.y))){var e=this.ctx,i=this.offsetX,r=this.offsetY,n=t.clone().shorten(5),s=n.getLeftVector().clone(),o=n.getRightVector().clone();s.x+=i,s.y+=r,o.x+=i,o.y+=r,s=t.getLeftVector().clone(),o=t.getRightVector().clone(),s.x+=i,s.y+=r,o.x+=i,o.y+=r,e.save();var h=a.normals(s,o);h[0].normalize(),h[1].normalize();var l=s,u=o;t.getRightChiral()&&(l=o,u=s);var g=a.add(l,a.multiplyScalar(h[0],this.halfBondThickness)),c=a.add(u,a.multiplyScalar(h[0],1.5+this.halfBondThickness)),d=a.add(u,a.multiplyScalar(h[1],1.5+this.halfBondThickness)),v=a.add(l,a.multiplyScalar(h[1],this.halfBondThickness));e.beginPath(),e.moveTo(g.x,g.y),e.lineTo(c.x,c.y),e.lineTo(d.x,d.y),e.lineTo(v.x,v.y);var f=this.ctx.createRadialGradient(o.x,o.y,this.opts.bondLength,o.x,o.y,0);f.addColorStop(.4,this.themeManager.getColor(t.getLeftElement())||this.themeManager.getColor("C")),f.addColorStop(.6,this.themeManager.getColor(t.getRightElement())||this.themeManager.getColor("C")),e.fillStyle=f,e.fill(),e.restore()}}},{key:"drawDashedWedge",value:function(t){if(!(isNaN(t.from.x)||isNaN(t.from.y)||isNaN(t.to.x)||isNaN(t.to.y))){var e=this.ctx,i=this.offsetX,r=this.offsetY,n=t.getLeftVector().clone(),s=t.getRightVector().clone();n.x+=i,n.y+=r,s.x+=i,s.y+=r,e.save();var o=a.normals(n,s);o[0].normalize(),o[1].normalize();var h,l,u,g,c=t.getRightChiral(),d=t.clone();c?(h=s,l=n,d.shortenRight(1),u=d.getRightVector().clone(),g=d.getLeftVector().clone()):(h=n,l=s,d.shortenLeft(1),u=d.getLeftVector().clone(),g=d.getRightVector().clone()),u.x+=i,u.y+=r,g.x+=i,g.y+=r;var v=a.subtract(l,h).normalize();e.strokeStyle=this.themeManager.getColor("C"),e.lineCap="round",e.lineWidth=this.opts.bondThickness,e.beginPath();for(var f=t.getLength(),p=1.25/(f/(3*this.opts.bondThickness)),m=!1,y=0;y<1;y+=p){var b=a.multiplyScalar(v,y*f),w=a.add(h,b),S=1.5*y,x=a.multiplyScalar(o[0],S);!m&&y>.5&&(e.stroke(),e.beginPath(),e.strokeStyle=this.themeManager.getColor(t.getRightElement())||this.themeManager.getColor("C"),m=!0),w.subtract(x),e.moveTo(w.x,w.y),w.add(a.multiplyScalar(x,2)),e.lineTo(w.x,w.y)}e.stroke(),e.restore()}}},{key:"drawDebugText",value:function(t,e,i){var r=this.ctx;r.save(),r.font="5px Droid Sans, sans-serif",r.textAlign="start",r.textBaseline="top",r.fillStyle="#ff0000",r.fillText(i,t+this.offsetX,e+this.offsetY),r.restore()}},{key:"drawBall",value:function(t,e,i){var r=this.ctx;r.save(),r.beginPath(),r.arc(t+this.offsetX,e+this.offsetY,this.opts.bondLength/4.5,0,s.twoPI,!1),r.fillStyle=this.themeManager.getColor(i),r.fill(),r.restore()}},{key:"drawPoint",value:function(t,e,i){var r=this.ctx,n=this.offsetX,a=this.offsetY;r.save(),r.globalCompositeOperation="destination-out",r.beginPath(),r.arc(t+n,e+a,1.5,0,s.twoPI,!0),r.closePath(),r.fill(),r.globalCompositeOperation="source-over",r.beginPath(),r.arc(t+this.offsetX,e+this.offsetY,.75,0,s.twoPI,!1),r.fillStyle=this.themeManager.getColor(i),r.fill(),r.restore()}},{key:"drawText",value:function(t,e,i,r,n,a,h,l,u){var g=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},c=this.ctx,d=this.offsetX,v=this.offsetY;c.save(),c.textAlign="start",c.textBaseline="alphabetic";var f="",p=0;h&&(f=o(h),c.font=this.fontSmall,p=c.measureText(f).width);var m="0",y=0;l>0&&(m=l.toString(),c.font=this.fontSmall,y=c.measureText(m).width),1===h&&"N"===i&&g.hasOwnProperty("0O")&&g.hasOwnProperty("0O-1")&&(g={"0O":{element:"O",count:2,hydrogenCount:0,previousElement:"C",charge:""}},h=0),c.font=this.fontLarge,c.fillStyle=this.themeManager.getColor("BACKGROUND");var b=c.measureText(i);b.totalWidth=b.width+p,b.height=parseInt(this.fontLarge,10);var w=b.width>this.opts.fontSizeLarge?b.width:this.opts.fontSizeLarge;w/=1.5,c.globalCompositeOperation="destination-out",c.beginPath(),c.arc(t+d,e+v,w,0,s.twoPI,!0),c.closePath(),c.fill(),c.globalCompositeOperation="source-over";var S=-b.width/2,x=-b.width/2;c.fillStyle=this.themeManager.getColor(i),c.fillText(i,t+d+S,e+this.opts.halfFontSizeLarge+v),S+=b.width,h&&(c.font=this.fontSmall,c.fillText(f,t+d+S,e-this.opts.fifthFontSizeSmall+v),S+=p),l>0&&(c.font=this.fontSmall,c.fillText(m,t+d+x-y,e-this.opts.fifthFontSizeSmall+v),x-=y),c.font=this.fontLarge;var A=0,C=0;if(1===r){var k=t+d,N=e+v+this.opts.halfFontSizeLarge;x-=A=this.hydrogenWidth,"left"===n?k+=x:"right"===n||"up"===n&&a||"down"===n&&a?k+=S:"up"!==n||a?"down"!==n||a||(N+=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,k-=this.halfHydrogenWidth):(N-=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,k-=this.halfHydrogenWidth),c.fillText("H",k,N),S+=A}else if(r>1){var R=t+d,T=e+v+this.opts.halfFontSizeLarge;A=this.hydrogenWidth,c.font=this.fontSmall,x-=A+(C=c.measureText(r).width),"left"===n?R+=x:"right"===n||"up"===n&&a||"down"===n&&a?R+=S:"up"!==n||a?"down"!==n||a||(T+=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,R-=this.halfHydrogenWidth):(T-=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,R-=this.halfHydrogenWidth),c.font=this.fontLarge,c.fillText("H",R,T),c.font=this.fontSmall,c.fillText(r,R+this.halfHydrogenWidth+C,T+this.opts.fifthFontSizeSmall),S+=A+this.halfHydrogenWidth+C}for(var B in g)if(g.hasOwnProperty(B)){var I=0,E=0,L=g[B].element,P=g[B].count,M=g[B].hydrogenCount,O=g[B].charge;c.font=this.fontLarge,P>1&&M>0&&(I=c.measureText("(").width,E=c.measureText(")").width);var D=c.measureText(L).width,H=0,z="",F=0;A=0,M>0&&(A=this.hydrogenWidth),c.font=this.fontSmall,P>1&&(H=c.measureText(P).width),0!==O&&(z=o(O),F=c.measureText(z).width),C=0,M>1&&(C=c.measureText(M).width),c.font=this.fontLarge;var V=t+d,W=e+v+this.opts.halfFontSizeLarge;c.fillStyle=this.themeManager.getColor(L),P>0&&(x-=H),P>1&&M>0&&("left"===n?(x-=E,c.fillText(")",V+x,W)):(c.fillText("(",V+S,W),S+=I)),"left"===n?(x-=D,c.fillText(L,V+x,W)):(c.fillText(L,V+S,W),S+=D),M>0&&("left"===n?(x-=A+C,c.fillText("H",V+x,W),M>1&&(c.font=this.fontSmall,c.fillText(M,V+x+A,W+this.opts.fifthFontSizeSmall))):(c.fillText("H",V+S,W),S+=A,M>1&&(c.font=this.fontSmall,c.fillText(M,V+S,W+this.opts.fifthFontSizeSmall),S+=C))),c.font=this.fontLarge,P>1&&M>0&&("left"===n?(x-=I,c.fillText("(",V+x,W)):(c.fillText(")",V+S,W),S+=E)),c.font=this.fontSmall,P>1&&("left"===n?c.fillText(P,V+x+I+E+A+C+D,W+this.opts.fifthFontSizeSmall):(c.fillText(P,V+S,W+this.opts.fifthFontSizeSmall),S+=H)),0!==O&&("left"===n?c.fillText(z,V+x+I+E+A+C+D,e-this.opts.fifthFontSizeSmall+v):(c.fillText(z,V+S,e-this.opts.fifthFontSizeSmall+v),S+=F))}c.restore()}},{key:"getChargeText",value:function(t){return 1===t?"+":2===t?"2+":-1===t?"-":-2===t?"2-":""}},{key:"drawDebugPoint",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#f00";this.drawCircle(t,e,2,r,!0,!0,i)}},{key:"drawAromaticityRing",value:function(t){var e=this.ctx,i=s.apothemFromSideLength(this.opts.bondLength,t.getSize());e.save(),e.strokeStyle=this.themeManager.getColor("C"),e.lineWidth=this.opts.bondThickness,e.beginPath(),e.arc(t.center.x+this.offsetX,t.center.y+this.offsetY,i-this.opts.bondSpacing,0,2*Math.PI,!0),e.closePath(),e.stroke(),e.restore()}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.offsetWidth,this.canvas.offsetHeight)}}]),t}();t.exports=h},5879:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=i(4310),a=function(){"use strict";function t(e){r(this,t),this.svgDrawer=new s(e)}return n(t,[{key:"draw",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=null;s="string"===typeof e||e instanceof String?document.getElementById(e):e;var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttributeNS(null,"viewBox","0 0 "+this.svgDrawer.opts.width+" "+this.svgDrawer.opts.height),a.setAttributeNS(null,"width",this.svgDrawer.opts.width+""),a.setAttributeNS(null,"height",this.svgDrawer.opts.height+""),this.svgDrawer.draw(t,a,i,r,n),this.svgDrawer.svgWrapper.toCanvas(s,this.svgDrawer.opts.width,this.svgDrawer.opts.height)}},{key:"getTotalOverlapScore",value:function(){return this.svgDrawer.getTotalOverlapScore()}},{key:"getMolecularFormula",value:function(){this.svgDrawer.getMolecularFormula()}}]),t}();t.exports=a},3214:function(t,e,i){var r=i(4704).default,n=i(861).default,s=i(6690).default,a=i(9728).default,o=i(5013),h=i(9521),l=i(8357),u=i(1423),g=(i(1965),i(8674)),c=i(8666),d=i(648),v=i(6733),f=i(8888),p=i(5901),m=i(1105),y=i(496),b=i(2181),w=function(){"use strict";function t(e){s(this,t),this.graph=null,this.doubleBondConfigCount=0,this.doubleBondConfig=null,this.ringIdCounter=0,this.ringConnectionIdCounter=0,this.canvasWrapper=null,this.totalOverlapScore=0,this.defaultOptions={width:500,height:500,scale:0,bondThickness:1,bondLength:30,shortBondLength:.8,bondSpacing:.17*30,atomVisualization:"default",isomeric:!0,debug:!1,terminalCarbons:!1,explicitHydrogens:!0,overlapSensitivity:.42,overlapResolutionIterations:1,compactDrawing:!0,fontFamily:"Arial, Helvetica, sans-serif",fontSizeLarge:11,fontSizeSmall:3,padding:10,experimentalSSSR:!1,kkThreshold:.1,kkInnerThreshold:.1,kkMaxIteration:2e4,kkMaxInnerIteration:50,kkMaxEnergy:1e9,themes:{dark:{C:"#fff",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#aaa",BACKGROUND:"#141414"},light:{C:"#222",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#666",BACKGROUND:"#fff"},oldschool:{C:"#000",O:"#000",N:"#000",F:"#000",CL:"#000",BR:"#000",I:"#000",P:"#000",S:"#000",B:"#000",SI:"#000",H:"#000",BACKGROUND:"#fff"},solarized:{C:"#586e75",O:"#dc322f",N:"#268bd2",F:"#859900",CL:"#16a085",BR:"#cb4b16",I:"#6c71c4",P:"#d33682",S:"#b58900",B:"#2aa198",SI:"#2aa198",H:"#657b83",BACKGROUND:"#fff"},"solarized-dark":{C:"#93a1a1",O:"#dc322f",N:"#268bd2",F:"#859900",CL:"#16a085",BR:"#cb4b16",I:"#6c71c4",P:"#d33682",S:"#b58900",B:"#2aa198",SI:"#2aa198",H:"#839496",BACKGROUND:"#fff"},matrix:{C:"#678c61",O:"#2fc079",N:"#4f7e7e",F:"#90d762",CL:"#82d967",BR:"#23755a",I:"#409931",P:"#c1ff8a",S:"#faff00",B:"#50b45a",SI:"#409931",H:"#426644",BACKGROUND:"#fff"},github:{C:"#24292f",O:"#cf222e",N:"#0969da",F:"#2da44e",CL:"#6fdd8b",BR:"#bc4c00",I:"#8250df",P:"#bf3989",S:"#d4a72c",B:"#fb8f44",SI:"#bc4c00",H:"#57606a",BACKGROUND:"#fff"},carbon:{C:"#161616",O:"#da1e28",N:"#0f62fe",F:"#198038",CL:"#007d79",BR:"#fa4d56",I:"#8a3ffc",P:"#ff832b",S:"#f1c21b",B:"#8a3800",SI:"#e67e22",H:"#525252",BACKGROUND:"#fff"},cyberpunk:{C:"#ea00d9",O:"#ff3131",N:"#0abdc6",F:"#00ff9f",CL:"#00fe00",BR:"#fe9f20",I:"#ff00ff",P:"#fe7f00",S:"#fcee0c",B:"#ff00ff",SI:"#ffffff",H:"#913cb1",BACKGROUND:"#fff"},gruvbox:{C:"#665c54",O:"#cc241d",N:"#458588",F:"#98971a",CL:"#79740e",BR:"#d65d0e",I:"#b16286",P:"#af3a03",S:"#d79921",B:"#689d6a",SI:"#427b58",H:"#7c6f64",BACKGROUND:"#fbf1c7"},"gruvbox-dark":{C:"#ebdbb2",O:"#cc241d",N:"#458588",F:"#98971a",CL:"#b8bb26",BR:"#d65d0e",I:"#b16286",P:"#fe8019",S:"#d79921",B:"#8ec07c",SI:"#83a598",H:"#bdae93",BACKGROUND:"#282828"},custom:{C:"#222",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#666",BACKGROUND:"#fff"}}},this.opts=b.extend(!0,this.defaultOptions,e),this.opts.halfBondSpacing=this.opts.bondSpacing/2,this.opts.bondLengthSq=this.opts.bondLength*this.opts.bondLength,this.opts.halfFontSizeLarge=this.opts.fontSizeLarge/2,this.opts.quarterFontSizeLarge=this.opts.fontSizeLarge/4,this.opts.fifthFontSizeSmall=this.opts.fontSizeSmall/5,this.theme=this.opts.themes.dark}return a(t,[{key:"draw",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.initDraw(t,i,r),this.infoOnly||(this.themeManager=new y(this.opts.themes,i),this.canvasWrapper=new f(e,this.themeManager,this.opts)),r||(this.processGraph(),this.canvasWrapper.scale(this.graph.vertices),this.drawEdges(this.opts.debug),this.drawVertices(this.opts.debug),this.canvasWrapper.reset(),this.opts.debug&&(console.log(this.graph),console.log(this.rings),console.log(this.ringConnections)))}},{key:"edgeRingCount",value:function(t){var e=this.graph.edges[t],i=this.graph.vertices[e.sourceId],r=this.graph.vertices[e.targetId];return Math.min(i.value.rings.length,r.value.rings.length)}},{key:"getBridgedRings",value:function(){for(var t=Array(),e=0;e<this.rings.length;e++)this.rings[e].isBridged&&t.push(this.rings[e]);return t}},{key:"getFusedRings",value:function(){for(var t=Array(),e=0;e<this.rings.length;e++)this.rings[e].isFused&&t.push(this.rings[e]);return t}},{key:"getSpiros",value:function(){for(var t=Array(),e=0;e<this.rings.length;e++)this.rings[e].isSpiro&&t.push(this.rings[e]);return t}},{key:"printRingInfo",value:function(){for(var t="",e=0;e<this.rings.length;e++){var i=this.rings[e];t+=i.id+";",t+=i.members.length+";",t+=i.neighbours.length+";",t+=i.isSpiro?"true;":"false;",t+=i.isFused?"true;":"false;",t+=i.isBridged?"true;":"false;",t+=i.rings.length+";",t+="\n"}return t}},{key:"rotateDrawing",value:function(){for(var t=0,e=0,i=0,r=0;r<this.graph.vertices.length;r++){var n=this.graph.vertices[r];if(n.value.isDrawn)for(var s=r+1;s<this.graph.vertices.length;s++){var a=this.graph.vertices[s];if(a.value.isDrawn){var o=n.position.distanceSq(a.position);o>i&&(i=o,t=r,e=s)}}}var h=-l.subtract(this.graph.vertices[t].position,this.graph.vertices[e].position).angle();if(!isNaN(h)){var u=h%.523599;u<.2617995?h-=u:h+=.523599-u;for(r=0;r<this.graph.vertices.length;r++)r!==e&&this.graph.vertices[r].position.rotateAround(h,this.graph.vertices[e].position);for(r=0;r<this.rings.length;r++)this.rings[r].center.rotateAround(h,this.graph.vertices[e].position)}}},{key:"getTotalOverlapScore",value:function(){return this.totalOverlapScore}},{key:"getRingCount",value:function(){return this.rings.length}},{key:"hasBridgedRing",value:function(){return this.bridgedRing}},{key:"getHeavyAtomCount",value:function(){for(var t=0,e=0;e<this.graph.vertices.length;e++)"H"!==this.graph.vertices[e].value.element&&t++;return t}},{key:"getMolecularFormula",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e="",i=new Map,r=null===t?this.graph:new p(t,this.opts.isomeric),n=0;n<r.vertices.length;n++){var s=r.vertices[n].value;if(i.has(s.element)?i.set(s.element,i.get(s.element)+1):i.set(s.element,1),s.bracket&&!s.bracket.chirality&&(i.has("H")?i.set("H",i.get("H")+s.bracket.hcount):i.set("H",s.bracket.hcount)),!s.bracket){var a=c.maxBonds[s.element]-s.bondCount;s.isPartOfAromaticRing&&a--,i.has("H")?i.set("H",i.get("H")+a):i.set("H",a)}}if(i.has("C")){var o=i.get("C");e+="C"+(o>1?o:""),i.delete("C")}if(i.has("H")){var h=i.get("H");e+="H"+(h>1?h:""),i.delete("H")}return Object.keys(c.atomicNumbers).sort().map((function(t){if(i.has(t)){var r=i.get(t);e+=t+(r>1?r:"")}})),e}},{key:"getRingbondType",value:function(t,e){if(t.value.getRingbondCount()<1||e.value.getRingbondCount()<1)return null;for(var i=0;i<t.value.ringbonds.length;i++)for(var r=0;r<e.value.ringbonds.length;r++)if(t.value.ringbonds[i].id===e.value.ringbonds[r].id)return"-"===t.value.ringbonds[i].bondType?e.value.ringbonds[r].bond:t.value.ringbonds[i].bond;return null}},{key:"initDraw",value:function(t,e,i,r){this.data=t,this.infoOnly=i,this.ringIdCounter=0,this.ringConnectionIdCounter=0,this.graph=new p(t,this.opts.isomeric),this.rings=Array(),this.ringConnections=Array(),this.originalRings=Array(),this.originalRingConnections=Array(),this.bridgedRing=!1,this.doubleBondConfigCount=null,this.doubleBondConfig=null,this.highlight_atoms=r,this.initRings(),this.initHydrogens()}},{key:"processGraph",value:function(){this.position(),this.restoreRingInformation(),this.resolvePrimaryOverlaps();var t=this.getOverlapScore();this.totalOverlapScore=this.getOverlapScore().total;for(var e=0;e<this.opts.overlapResolutionIterations;e++)for(var i=0;i<this.graph.edges.length;i++){var r=this.graph.edges[i];if(this.isEdgeRotatable(r)){var n=this.graph.getTreeDepth(r.sourceId,r.targetId),s=this.graph.getTreeDepth(r.targetId,r.sourceId),a=r.targetId,h=r.sourceId;if(n>s&&(a=r.sourceId,h=r.targetId),this.getSubtreeOverlapScore(h,a,t.vertexScores).value>this.opts.overlapSensitivity){var l=this.graph.vertices[a],u=this.graph.vertices[h],g=u.getNeighbours(a);if(1===g.length){var c=this.graph.vertices[g[0]],d=c.position.getRotateAwayFromAngle(l.position,u.position,o.toRad(120));this.rotateSubtree(c.id,u.id,d,u.position);var v=this.getOverlapScore().total;v>this.totalOverlapScore?this.rotateSubtree(c.id,u.id,-d,u.position):this.totalOverlapScore=v}else if(2===g.length){if(0!==u.value.rings.length&&0!==l.value.rings.length)continue;var f=this.graph.vertices[g[0]],p=this.graph.vertices[g[1]];if(1===f.value.rings.length&&1===p.value.rings.length){if(f.value.rings[0]!==p.value.rings[0])continue}else{if(0!==f.value.rings.length||0!==p.value.rings.length)continue;var m=f.position.getRotateAwayFromAngle(l.position,u.position,o.toRad(120)),y=p.position.getRotateAwayFromAngle(l.position,u.position,o.toRad(120));this.rotateSubtree(f.id,u.id,m,u.position),this.rotateSubtree(p.id,u.id,y,u.position);var b=this.getOverlapScore().total;b>this.totalOverlapScore?(this.rotateSubtree(f.id,u.id,-m,u.position),this.rotateSubtree(p.id,u.id,-y,u.position)):this.totalOverlapScore=b}}t=this.getOverlapScore()}}}this.resolveSecondaryOverlaps(t.scores),this.opts.isomeric&&this.annotateStereochemistry(),this.opts.compactDrawing&&"default"===this.opts.atomVisualization&&this.initPseudoElements(),this.rotateDrawing()}},{key:"initRings",value:function(){for(var t=new Map,e=this.graph.vertices.length-1;e>=0;e--){var i=this.graph.vertices[e];if(0!==i.value.ringbonds.length)for(var r=0;r<i.value.ringbonds.length;r++){var s=i.value.ringbonds[r].id,a=i.value.ringbonds[r].bond;if(t.has(s)){var o=i.id,h=t.get(s)[0],l=t.get(s)[1],u=new g(o,h,1);u.setBondType(l||a||"-");var c=this.graph.addEdge(u),f=this.graph.vertices[h];i.addRingbondChild(h,r),i.value.addNeighbouringElement(f.value.element),f.addRingbondChild(o,r),f.value.addNeighbouringElement(i.value.element),i.edges.push(c),f.edges.push(c),t.delete(s)}else t.set(s,[i.id,a])}}var p=m.getRings(this.graph,this.opts.experimentalSSSR);if(null!==p){for(e=0;e<p.length;e++){var y=n(p[e]),b=this.addRing(new d(y));for(r=0;r<y.length;r++)this.graph.vertices[y[r]].value.rings.push(b)}for(e=0;e<this.rings.length-1;e++)for(r=e+1;r<this.rings.length;r++){var w=this.rings[e],S=this.rings[r],x=new v(w,S);x.vertices.size>0&&this.addRingConnection(x)}for(e=0;e<this.rings.length;e++){var A=this.rings[e];A.neighbours=v.getNeighbours(this.ringConnections,A.id)}for(e=0;e<this.rings.length;e++){var C=this.rings[e];this.graph.vertices[C.members[0]].value.addAnchoredRing(C.id)}for(this.backupRingInformation();this.rings.length>0;){var k=-1;for(e=0;e<this.rings.length;e++){var N=this.rings[e];this.isPartOfBridgedRing(N.id)&&!N.isBridged&&(k=N.id)}if(-1===k)break;var R=this.getRing(k),T=this.getBridgedRingRings(R.id);this.bridgedRing=!0,this.createBridgedRing(T,R.members[0]);for(e=0;e<T.length;e++)this.removeRing(T[e])}}}},{key:"initHydrogens",value:function(){if(!this.opts.explicitHydrogens)for(var t=0;t<this.graph.vertices.length;t++){var e=this.graph.vertices[t];if("H"===e.value.element){var i=this.graph.vertices[e.neighbours[0]];i.value.hasHydrogen=!0,(!i.value.isStereoCenter||i.value.rings.length<2&&!i.value.bridgedRing||i.value.bridgedRing&&i.value.originalRings.length<2)&&(e.value.isDrawn=!1)}}}},{key:"getBridgedRingRings",value:function(t){var e=Array(),i=this;return function t(r){var n=i.getRing(r);e.push(r);for(var s=0;s<n.neighbours.length;s++){var a=n.neighbours[s];-1===e.indexOf(a)&&a!==r&&v.isBridge(i.ringConnections,i.graph.vertices,r,a)&&t(a)}}(t),h.unique(e)}},{key:"isPartOfBridgedRing",value:function(t){for(var e=0;e<this.ringConnections.length;e++)if(this.ringConnections[e].containsRing(t)&&this.ringConnections[e].isBridge(this.graph.vertices))return!0;return!1}},{key:"createBridgedRing",value:function(t,e){for(var i=new Set,s=new Set,a=new Set,o=0;o<t.length;o++){var l=this.getRing(t[o]);l.isPartOfBridged=!0;for(var u=0;u<l.members.length;u++)s.add(l.members[u]);for(u=0;u<l.neighbours.length;u++){var g=l.neighbours[u];-1===t.indexOf(g)&&a.add(l.neighbours[u])}}var c,v=new Set,f=r(s);try{for(f.s();!(c=f.n()).done;){var p=c.value,m=this.graph.vertices[p],y=h.intersection(t,m.value.rings);1===m.value.rings.length||1===y.length?i.add(m.id):v.add(m.id)}}catch(O){f.e(O)}finally{f.f()}Array();var b,w=Array(),S=r(v);try{for(S.s();!(b=S.n()).done;){for(var x=b.value,A=this.graph.vertices[x],C=!1,k=0;k<A.edges.length;k++)1===this.edgeRingCount(A.edges[k])&&(C=!0);C?(A.value.isBridgeNode=!0,i.add(A.id)):(A.value.isBridge=!0,i.add(A.id))}}catch(O){S.e(O)}finally{S.f()}var N=new d(n(i));this.addRing(N),N.isBridged=!0,N.neighbours=n(a);for(o=0;o<t.length;o++)N.rings.push(this.getRing(t[o]).clone());for(o=0;o<N.members.length;o++)this.graph.vertices[N.members[o]].value.bridgedRing=N.id;for(o=0;o<w.length;o++){this.graph.vertices[w[o]].value.rings=Array()}var R,T=r(i);try{for(T.s();!(R=T.n()).done;){var B=R.value,I=this.graph.vertices[B];I.value.rings=h.removeAll(I.value.rings,t),I.value.rings.push(N.id)}}catch(O){T.e(O)}finally{T.f()}for(o=0;o<t.length;o++)for(u=o+1;u<t.length;u++)this.removeRingConnectionsBetween(t[o],t[u]);var E,L=r(a);try{for(L.s();!(E=L.n()).done;){var P=E.value,M=this.getRingConnections(P,t);for(u=0;u<M.length;u++)this.getRingConnection(M[u]).updateOther(N.id,P);this.getRing(P).neighbours.push(N.id)}}catch(O){L.e(O)}finally{L.f()}return N}},{key:"areVerticesInSameRing",value:function(t,e){for(var i=0;i<t.value.rings.length;i++)for(var r=0;r<e.value.rings.length;r++)if(t.value.rings[i]===e.value.rings[r])return!0;return!1}},{key:"getCommonRings",value:function(t,e){for(var i=Array(),r=0;r<t.value.rings.length;r++)for(var n=0;n<e.value.rings.length;n++)t.value.rings[r]==e.value.rings[n]&&i.push(t.value.rings[r]);return i}},{key:"getLargestOrAromaticCommonRing",value:function(t,e){for(var i=this.getCommonRings(t,e),r=0,n=null,s=0;s<i.length;s++){var a=this.getRing(i[s]),o=a.getSize();if(a.isBenzeneLike(this.graph.vertices))return a;o>r&&(r=o,n=a)}return n}},{key:"getVerticesAt",value:function(t,e,i){for(var r=Array(),n=0;n<this.graph.vertices.length;n++){var s=this.graph.vertices[n];if(s.id!==i&&s.positioned)t.distanceSq(s.position)<=e*e&&r.push(s.id)}return r}},{key:"getClosestVertex",value:function(t){for(var e=99999,i=null,r=0;r<this.graph.vertices.length;r++){var n=this.graph.vertices[r];if(n.id!==t.id){var s=t.position.distanceSq(n.position);s<e&&(e=s,i=n)}}return i}},{key:"addRing",value:function(t){return t.id=this.ringIdCounter++,this.rings.push(t),t.id}},{key:"removeRing",value:function(t){this.rings=this.rings.filter((function(e){return e.id!==t})),this.ringConnections=this.ringConnections.filter((function(e){return e.firstRingId!==t&&e.secondRingId!==t}));for(var e=0;e<this.rings.length;e++){var i=this.rings[e];i.neighbours=i.neighbours.filter((function(e){return e!==t}))}}},{key:"getRing",value:function(t){for(var e=0;e<this.rings.length;e++)if(this.rings[e].id==t)return this.rings[e]}},{key:"addRingConnection",value:function(t){return t.id=this.ringConnectionIdCounter++,this.ringConnections.push(t),t.id}},{key:"removeRingConnection",value:function(t){this.ringConnections=this.ringConnections.filter((function(e){return e.id!==t}))}},{key:"removeRingConnectionsBetween",value:function(t,e){for(var i=Array(),r=0;r<this.ringConnections.length;r++){var n=this.ringConnections[r];(n.firstRingId===t&&n.secondRingId===e||n.firstRingId===e&&n.secondRingId===t)&&i.push(n.id)}for(r=0;r<i.length;r++)this.removeRingConnection(i[r])}},{key:"getRingConnection",value:function(t){for(var e=0;e<this.ringConnections.length;e++)if(this.ringConnections[e].id==t)return this.ringConnections[e]}},{key:"getRingConnections",value:function(t,e){for(var i=Array(),r=0;r<this.ringConnections.length;r++)for(var n=this.ringConnections[r],s=0;s<e.length;s++){var a=e[s];(n.firstRingId===t&&n.secondRingId===a||n.firstRingId===a&&n.secondRingId===t)&&i.push(n.id)}return i}},{key:"getOverlapScore",value:function(){for(var t=0,e=new Float32Array(this.graph.vertices.length),i=0;i<this.graph.vertices.length;i++)e[i]=0;for(i=0;i<this.graph.vertices.length;i++)for(var r=this.graph.vertices.length;--r>i;){var n=this.graph.vertices[i],s=this.graph.vertices[r];if(n.value.isDrawn&&s.value.isDrawn){var a=l.subtract(n.position,s.position).lengthSq();if(a<this.opts.bondLengthSq){var o=(this.opts.bondLength-Math.sqrt(a))/this.opts.bondLength;t+=o,e[i]+=o,e[r]+=o}}}var h=Array();for(i=0;i<this.graph.vertices.length;i++)h.push({id:i,score:e[i]});return h.sort((function(t,e){return e.score-t.score})),{total:t,scores:h,vertexScores:e}}},{key:"chooseSide",value:function(t,e,i){for(var r=t.getNeighbours(e.id),n=e.getNeighbours(t.id),s=r.length,a=n.length,o=h.merge(r,n),l=[0,0],u=0;u<o.length;u++){this.graph.vertices[o[u]].position.sameSideAs(t.position,e.position,i[0])?l[0]++:l[1]++}var g=[0,0];for(u=0;u<this.graph.vertices.length;u++){this.graph.vertices[u].position.sameSideAs(t.position,e.position,i[0])?g[0]++:g[1]++}return{totalSideCount:g,totalPosition:g[0]>g[1]?0:1,sideCount:l,position:l[0]>l[1]?0:1,anCount:s,bnCount:a}}},{key:"setRingCenter",value:function(t){for(var e=t.getSize(),i=new l(0,0),r=0;r<e;r++)i.add(this.graph.vertices[t.members[r]].position);t.center=i.divide(e)}},{key:"getSubringCenter",value:function(t,e){for(var i=e.value.originalRings,r=t.center,n=Number.MAX_VALUE,s=0;s<i.length;s++)for(var a=0;a<t.rings.length;a++)i[s]===t.rings[a].id&&t.rings[a].getSize()<n&&(r=t.rings[a].center,n=t.rings[a].getSize());return r}},{key:"drawEdges",value:function(t){var e=this,i=Array(this.graph.edges.length);if(i.fill(!1),this.graph.traverseBF(0,(function(r){for(var n=e.graph.getEdges(r.id),s=0;s<n.length;s++){var a=n[s];i[a]||(i[a]=!0,e.drawEdge(a,t))}})),!this.bridgedRing)for(var r=0;r<this.rings.length;r++){var n=this.rings[r];this.isRingAromatic(n)&&this.canvasWrapper.drawAromaticityRing(n)}}},{key:"drawEdge",value:function(t,e){var i=this,r=this.graph.edges[t],n=this.graph.vertices[r.sourceId],s=this.graph.vertices[r.targetId],a=n.value.element,o=s.value.element;if(n.value.isDrawn&&s.value.isDrawn||"default"!==this.opts.atomVisualization){var g=n.position,c=s.position,d=this.getEdgeNormals(r),v=h.clone(d);if(v[0].multiplyScalar(10).add(g),v[1].multiplyScalar(10).add(g),"="===r.bondType||"="===this.getRingbondType(n,s)||r.isPartOfAromaticRing&&this.bridgedRing){var f=this.areVerticesInSameRing(n,s),p=this.chooseSide(n,s,v);if(f){var m=this.getLargestOrAromaticCommonRing(n,s).center;d[0].multiplyScalar(i.opts.bondSpacing),d[1].multiplyScalar(i.opts.bondSpacing);var y=null;(y=m.sameSideAs(n.position,s.position,l.add(g,d[0]))?new u(l.add(g,d[0]),l.add(c,d[0]),a,o):new u(l.add(g,d[1]),l.add(c,d[1]),a,o)).shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),r.isPartOfAromaticRing?this.canvasWrapper.drawLine(y,!0):this.canvasWrapper.drawLine(y),this.canvasWrapper.drawLine(new u(g,c,a,o))}else if(r.center||n.isTerminal()&&s.isTerminal()){d[0].multiplyScalar(i.opts.halfBondSpacing),d[1].multiplyScalar(i.opts.halfBondSpacing);var b=new u(l.add(g,d[0]),l.add(c,d[0]),a,o),w=new u(l.add(g,d[1]),l.add(c,d[1]),a,o);this.canvasWrapper.drawLine(b),this.canvasWrapper.drawLine(w)}else if(0==p.anCount&&p.bnCount>1||0==p.bnCount&&p.anCount>1){d[0].multiplyScalar(i.opts.halfBondSpacing),d[1].multiplyScalar(i.opts.halfBondSpacing);var S=new u(l.add(g,d[0]),l.add(c,d[0]),a,o),x=new u(l.add(g,d[1]),l.add(c,d[1]),a,o);this.canvasWrapper.drawLine(S),this.canvasWrapper.drawLine(x)}else if(p.sideCount[0]>p.sideCount[1]){d[0].multiplyScalar(i.opts.bondSpacing),d[1].multiplyScalar(i.opts.bondSpacing);var A=new u(l.add(g,d[0]),l.add(c,d[0]),a,o);A.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(A),this.canvasWrapper.drawLine(new u(g,c,a,o))}else if(p.sideCount[0]<p.sideCount[1]){d[0].multiplyScalar(i.opts.bondSpacing),d[1].multiplyScalar(i.opts.bondSpacing);var C=new u(l.add(g,d[1]),l.add(c,d[1]),a,o);C.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(C),this.canvasWrapper.drawLine(new u(g,c,a,o))}else if(p.totalSideCount[0]>p.totalSideCount[1]){d[0].multiplyScalar(i.opts.bondSpacing),d[1].multiplyScalar(i.opts.bondSpacing);var k=new u(l.add(g,d[0]),l.add(c,d[0]),a,o);k.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(k),this.canvasWrapper.drawLine(new u(g,c,a,o))}else if(p.totalSideCount[0]<=p.totalSideCount[1]){d[0].multiplyScalar(i.opts.bondSpacing),d[1].multiplyScalar(i.opts.bondSpacing);var N=new u(l.add(g,d[1]),l.add(c,d[1]),a,o);N.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(N),this.canvasWrapper.drawLine(new u(g,c,a,o))}}else if("#"===r.bondType){d[0].multiplyScalar(i.opts.bondSpacing/1.5),d[1].multiplyScalar(i.opts.bondSpacing/1.5);var R=new u(l.add(g,d[0]),l.add(c,d[0]),a,o),T=new u(l.add(g,d[1]),l.add(c,d[1]),a,o);this.canvasWrapper.drawLine(R),this.canvasWrapper.drawLine(T),this.canvasWrapper.drawLine(new u(g,c,a,o))}else if("."===r.bondType);else{var B=n.value.isStereoCenter,I=s.value.isStereoCenter;"up"===r.wedge?this.canvasWrapper.drawWedge(new u(g,c,a,o,B,I)):"down"===r.wedge?this.canvasWrapper.drawDashedWedge(new u(g,c,a,o,B,I)):this.canvasWrapper.drawLine(new u(g,c,a,o,B,I))}if(e){var E=l.midpoint(g,c);this.canvasWrapper.drawDebugText(E.x,E.y,"e: "+t)}}}},{key:"drawVertices",value:function(t){var e=this.graph.vertices.length;for(e=0;e<this.graph.vertices.length;e++){var i=this.graph.vertices[e],r=i.value,n=0,s=0,a=i.value.bondCount,o=r.element,u=c.maxBonds[o]-a,g=i.getTextDirection(this.graph.vertices),d=!(!this.opts.terminalCarbons&&"C"===o&&!r.hasAttachedPseudoElements)&&i.isTerminal(),v="C"===r.element;if("N"===r.element&&r.isPartOfAromaticRing&&(u=0),r.bracket&&(u=r.bracket.hcount,n=r.bracket.charge,s=r.bracket.isotope),"allballs"===this.opts.atomVisualization)this.canvasWrapper.drawBall(i.position.x,i.position.y,o);else if(r.isDrawn&&(!v||r.drawExplicit||d||r.hasAttachedPseudoElements)||1===this.graph.vertices.length)"default"===this.opts.atomVisualization?this.canvasWrapper.drawText(i.position.x,i.position.y,o,u,g,d,n,s,this.graph.vertices.length,r.getAttachedPseudoElements()):"balls"===this.opts.atomVisualization&&this.canvasWrapper.drawBall(i.position.x,i.position.y,o);else if(2===i.getNeighbourCount()&&1==i.forcePositioned){var f=this.graph.vertices[i.neighbours[0]].position,p=this.graph.vertices[i.neighbours[1]].position,m=l.threePointangle(i.position,f,p);Math.abs(Math.PI-m)<.1&&this.canvasWrapper.drawPoint(i.position.x,i.position.y,o)}if(t){var y="v: "+i.id+" "+h.print(r.ringbonds);this.canvasWrapper.drawDebugText(i.position.x,i.position.y,y)}}if(this.opts.debug)for(e=0;e<this.rings.length;e++){var b=this.rings[e].center;this.canvasWrapper.drawDebugPoint(b.x,b.y,"r: "+this.rings[e].id)}}},{key:"position",value:function(){for(var t=null,e=0;e<this.graph.vertices.length;e++)if(null!==this.graph.vertices[e].value.bridgedRing){t=this.graph.vertices[e];break}for(e=0;e<this.rings.length;e++)this.rings[e].isBridged&&(t=this.graph.vertices[this.rings[e].members[0]]);this.rings.length>0&&null===t&&(t=this.graph.vertices[this.rings[0].members[0]]),null===t&&(t=this.graph.vertices[0]),this.createNextBond(t,null,0)}},{key:"backupRingInformation",value:function(){this.originalRings=Array(),this.originalRingConnections=Array();for(var t=0;t<this.rings.length;t++)this.originalRings.push(this.rings[t]);for(t=0;t<this.ringConnections.length;t++)this.originalRingConnections.push(this.ringConnections[t]);for(t=0;t<this.graph.vertices.length;t++)this.graph.vertices[t].value.backupRings()}},{key:"restoreRingInformation",value:function(){var t=this.getBridgedRings();this.rings=Array(),this.ringConnections=Array();for(var e=0;e<t.length;e++)for(var i=t[e],r=0;r<i.rings.length;r++){var n=i.rings[r];this.originalRings[n.id].center=n.center}for(e=0;e<this.originalRings.length;e++)this.rings.push(this.originalRings[e]);for(e=0;e<this.originalRingConnections.length;e++)this.ringConnections.push(this.originalRingConnections[e]);for(e=0;e<this.graph.vertices.length;e++)this.graph.vertices[e].value.restoreRings()}},{key:"createRing",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!t.positioned){e=e||new l(0,0);var n=t.getOrderedNeighbours(this.ringConnections),s=i?l.subtract(i.position,e).angle():0,a=o.polyCircumradius(this.opts.bondLength,t.getSize()),h=o.centralAngle(t.getSize());t.centralAngle=h;var u=s,g=this,c=i?i.id:null;if(-1===t.members.indexOf(c)&&(i&&(i.positioned=!1),c=t.members[0]),t.isBridged){this.graph.kkLayout(t.members.slice(),e,i.id,t,this.opts.bondLength,this.opts.kkThreshold,this.opts.kkInnerThreshold,this.opts.kkMaxIteration,this.opts.kkMaxInnerIteration,this.opts.kkMaxEnergy),t.positioned=!0,this.setRingCenter(t),e=t.center;for(var d=0;d<t.rings.length;d++)this.setRingCenter(t.rings[d])}else t.eachMember(this.graph.vertices,(function(i){var r=g.graph.vertices[i];r.positioned||r.setPosition(e.x+Math.cos(u)*a,e.y+Math.sin(u)*a),u+=h,(!t.isBridged||t.rings.length<3)&&(r.angle=u,r.positioned=!0)}),c,r?r.id:null);t.positioned=!0,t.center=e;for(d=0;d<n.length;d++){var f=this.getRing(n[d].neighbour);if(!f.positioned){var p=v.getVertices(this.ringConnections,t.id,f.id);if(2===p.length){t.isFused=!0,f.isFused=!0;var m=this.graph.vertices[p[0]],y=this.graph.vertices[p[1]],b=l.midpoint(m.position,y.position),w=l.normals(m.position,y.position);w[0].normalize(),w[1].normalize();var S=o.polyCircumradius(this.opts.bondLength,f.getSize()),x=o.apothem(S,f.getSize());w[0].multiplyScalar(x).add(b),w[1].multiplyScalar(x).add(b);var A=w[0];l.subtract(e,w[1]).lengthSq()>l.subtract(e,w[0]).lengthSq()&&(A=w[1]);var C=l.subtract(m.position,A),k=l.subtract(y.position,A);-1===C.clockwise(k)?f.positioned||this.createRing(f,A,m,y):f.positioned||this.createRing(f,A,y,m)}else if(1===p.length){t.isSpiro=!0,f.isSpiro=!0;var N=this.graph.vertices[p[0]],R=l.subtract(e,N.position);R.invert(),R.normalize();var T=o.polyCircumradius(this.opts.bondLength,f.getSize());R.multiplyScalar(T),R.add(N.position),f.positioned||this.createRing(f,R,N)}}}for(d=0;d<t.members.length;d++)for(var B=this.graph.vertices[t.members[d]],I=B.neighbours,E=0;E<I.length;E++){var L=this.graph.vertices[I[E]];L.positioned||(L.value.isConnectedToRing=!0,this.createNextBond(L,B,0))}}}},{key:"rotateSubtree",value:function(t,e,i,r){var n=this;this.graph.traverseTree(t,e,(function(t){t.position.rotateAround(i,r);for(var e=0;e<t.value.anchoredRings.length;e++){var s=n.rings[t.value.anchoredRings[e]];s&&s.center.rotateAround(i,r)}}))}},{key:"getSubtreeOverlapScore",value:function(t,e,i){var r=this,n=0,s=new l(0,0),a=0;return this.graph.traverseTree(t,e,(function(t){if(t.value.isDrawn){var e=i[t.id];e>r.opts.overlapSensitivity&&(n+=e,a++);var o=r.graph.vertices[t.id].position.clone();o.multiplyScalar(e),s.add(o)}})),s.divide(n),{value:n/a,center:s}}},{key:"getCurrentCenterOfMass",value:function(){for(var t=new l(0,0),e=0,i=0;i<this.graph.vertices.length;i++){var r=this.graph.vertices[i];r.positioned&&(t.add(r.position),e++)}return t.divide(e)}},{key:"getCurrentCenterOfMassInNeigbourhood",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*this.opts.bondLength,i=new l(0,0),r=0,n=e*e,s=0;s<this.graph.vertices.length;s++){var a=this.graph.vertices[s];a.positioned&&t.distanceSq(a.position)<n&&(i.add(a.position),r++)}return i.divide(r)}},{key:"resolvePrimaryOverlaps",value:function(){for(var t=Array(),e=Array(this.graph.vertices.length),i=0;i<this.rings.length;i++)for(var r=this.rings[i],n=0;n<r.members.length;n++){var s=this.graph.vertices[r.members[n]];if(!e[s.id]){e[s.id]=!0;var a=this.getNonRingNeighbours(s.id);if(a.length>1){for(var o=Array(),h=0;h<s.value.rings.length;h++)o.push(s.value.rings[h]);t.push({common:s,rings:o,vertices:a})}else if(1===a.length&&2===s.value.rings.length){var l=Array();for(h=0;h<s.value.rings.length;h++)l.push(s.value.rings[h]);t.push({common:s,rings:l,vertices:a})}}}for(i=0;i<t.length;i++){var u=t[i];if(2===u.vertices.length){var g=u.vertices[0],c=u.vertices[1];if(!g.value.isDrawn||!c.value.isDrawn)continue;var d=(2*Math.PI-this.getRing(u.rings[0]).getAngle())/6;this.rotateSubtree(g.id,u.common.id,d,u.common.position),this.rotateSubtree(c.id,u.common.id,-d,u.common.position);var v=this.getOverlapScore(),f=this.getSubtreeOverlapScore(g.id,u.common.id,v.vertexScores),p=this.getSubtreeOverlapScore(c.id,u.common.id,v.vertexScores),m=f.value+p.value;this.rotateSubtree(g.id,u.common.id,-2*d,u.common.position),this.rotateSubtree(c.id,u.common.id,2*d,u.common.position),v=this.getOverlapScore(),f=this.getSubtreeOverlapScore(g.id,u.common.id,v.vertexScores),p=this.getSubtreeOverlapScore(c.id,u.common.id,v.vertexScores),f.value+p.value>m&&(this.rotateSubtree(g.id,u.common.id,2*d,u.common.position),this.rotateSubtree(c.id,u.common.id,-2*d,u.common.position))}else 1===u.vertices.length&&u.rings.length}}},{key:"resolveSecondaryOverlaps",value:function(t){for(var e=0;e<t.length;e++)if(t[e].score>this.opts.overlapSensitivity){var i=this.graph.vertices[t[e].id];if(i.isTerminal()){var r=this.getClosestVertex(i);if(r){var n=null;n=r.isTerminal()?0===r.id?this.graph.vertices[1].position:r.previousPosition:0===r.id?this.graph.vertices[1].position:r.position;var s=0===i.id?this.graph.vertices[1].position:i.previousPosition;i.position.rotateAwayFrom(n,s,o.toRad(20))}}}}},{key:"getLastVertexWithAngle",value:function(t){for(var e=0,i=null;!e&&t;)e=(i=this.graph.vertices[t]).angle,t=i.parentVertexId;return i}},{key:"createNextBond",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!t.positioned||n){var s=!1;if(e){var a=this.graph.getEdge(t.id,e.id);"/"!==a.bondType&&"\\"!==a.bondType||++this.doubleBondConfigCount%2!==1||null===this.doubleBondConfig&&(this.doubleBondConfig=a.bondType,s=!0,null===e.parentVertexId&&t.value.branchBond&&("/"===this.doubleBondConfig?this.doubleBondConfig="\\":"\\"===this.doubleBondConfig&&(this.doubleBondConfig="/")))}if(!n)if(e)if(e.value.rings.length>0){var u=e.neighbours,g=null,c=new l(0,0);if(null===e.value.bridgedRing&&e.value.rings.length>1)for(var d=0;d<u.length;d++){var v=this.graph.vertices[u[d]];if(h.containsAll(v.value.rings,e.value.rings)){g=v;break}}if(null===g){for(d=0;d<u.length;d++){var f=this.graph.vertices[u[d]];f.positioned&&this.areVerticesInSameRing(f,e)&&c.add(l.subtract(f.position,e.position))}c.invert().normalize().multiplyScalar(this.opts.bondLength).add(e.position)}else c=g.position.clone().rotateAround(Math.PI,e.position);t.previousPosition=e.position,t.setPositionFromVector(c),t.positioned=!0}else{var p=new l(this.opts.bondLength,0);p.rotate(i),p.add(e.position),t.setPositionFromVector(p),t.previousPosition=e.position,t.positioned=!0}else{var m=new l(this.opts.bondLength,0);m.rotate(o.toRad(-60)),t.previousPosition=m,t.setPosition(this.opts.bondLength,0),t.angle=o.toRad(-60),null===t.value.bridgedRing&&(t.positioned=!0)}if(null!==t.value.bridgedRing){var y=this.getRing(t.value.bridgedRing);if(!y.positioned){var b=l.subtract(t.previousPosition,t.position);b.invert(),b.normalize();var w=o.polyCircumradius(this.opts.bondLength,y.members.length);b.multiplyScalar(w),b.add(t.position),this.createRing(y,b,t)}}else if(t.value.rings.length>0){var S=this.getRing(t.value.rings[0]);if(!S.positioned){var x=l.subtract(t.previousPosition,t.position);x.invert(),x.normalize();var A=o.polyCircumradius(this.opts.bondLength,S.getSize());x.multiplyScalar(A),x.add(t.position),this.createRing(S,x,t)}}else{t.value.isStereoCenter;var C=t.getNeighbours(),k=Array();for(d=0;d<C.length;d++)this.graph.vertices[C[d]].value.isDrawn&&k.push(C[d]);e&&(k=h.remove(k,e.id));var N=t.getAngle();if(1===k.length){var R=this.graph.vertices[k[0]];if("#"===t.value.bondType||e&&"#"===e.value.bondType||"="===t.value.bondType&&e&&0===e.value.rings.length&&"="===e.value.bondType&&"-"!==t.value.branchBond){if(t.value.drawExplicit=!1,e)this.graph.getEdge(t.id,e.id).center=!0;this.graph.getEdge(t.id,R.id).center=!0,("#"===t.value.bondType||e&&"#"===e.value.bondType)&&(R.angle=0),R.drawExplicit=!0,this.createNextBond(R,t,N+R.angle)}else if(e&&e.value.rings.length>0){var T=o.toRad(60),B=-T,I=new l(this.opts.bondLength,0),E=new l(this.opts.bondLength,0);I.rotate(T).add(t.position),E.rotate(B).add(t.position);var L=this.getCurrentCenterOfMass(),P=I.distanceSq(L),M=E.distanceSq(L);R.angle=P<M?B:T,this.createNextBond(R,t,N+R.angle)}else{var O=t.angle;if(e&&e.neighbours.length>3)O=O>0?Math.min(1.0472,O):O<0?Math.max(-1.0472,O):1.0472;else if(!O){(O=this.getLastVertexWithAngle(t.id).angle)||(O=1.0472)}if(e&&!s){var D=this.graph.getEdge(t.id,R.id).bondType;"/"===D?("/"===this.doubleBondConfig||"\\"===this.doubleBondConfig&&(O=-O),this.doubleBondConfig=null):"\\"===D&&("/"===this.doubleBondConfig?O=-O:this.doubleBondConfig,this.doubleBondConfig=null)}R.angle=r?O:-O,this.createNextBond(R,t,N+R.angle)}}else if(2===k.length){var H=t.angle;H||(H=1.0472);var z=this.graph.getTreeDepth(k[0],t.id),F=this.graph.getTreeDepth(k[1],t.id),V=this.graph.vertices[k[0]],W=this.graph.vertices[k[1]];V.value.subtreeDepth=z,W.value.subtreeDepth=F;var _=this.graph.getTreeDepth(e?e.id:null,t.id);e&&(e.value.subtreeDepth=_);var U=0,X=1;"C"===W.value.element&&"C"!==V.value.element&&F>1&&z<5?(U=1,X=0):"C"!==W.value.element&&"C"===V.value.element&&z>1&&F<5?(U=0,X=1):F>z&&(U=1,X=0);var Y=this.graph.vertices[k[U]],j=this.graph.vertices[k[X]],q=(this.graph.getEdge(t.id,Y.id),this.graph.getEdge(t.id,j.id),!1);_<z&&_<F&&(q=!0),j.angle=H,Y.angle=-H,"\\"===this.doubleBondConfig?"\\"===j.value.branchBond&&(j.angle=-H,Y.angle=H):"/"===this.doubleBondConfig&&"/"===j.value.branchBond&&(j.angle=-H,Y.angle=H),this.createNextBond(j,t,N+j.angle,q),this.createNextBond(Y,t,N+Y.angle,q)}else if(3===k.length){var G=this.graph.getTreeDepth(k[0],t.id),K=this.graph.getTreeDepth(k[1],t.id),Z=this.graph.getTreeDepth(k[2],t.id),J=this.graph.vertices[k[0]],$=this.graph.vertices[k[1]],Q=this.graph.vertices[k[2]];J.value.subtreeDepth=G,$.value.subtreeDepth=K,Q.value.subtreeDepth=Z,K>G&&K>Z?(J=this.graph.vertices[k[1]],$=this.graph.vertices[k[0]],Q=this.graph.vertices[k[2]]):Z>G&&Z>K&&(J=this.graph.vertices[k[2]],$=this.graph.vertices[k[0]],Q=this.graph.vertices[k[1]]),e&&e.value.rings.length<1&&J.value.rings.length<1&&$.value.rings.length<1&&Q.value.rings.length<1&&1===this.graph.getTreeDepth($.id,t.id)&&1===this.graph.getTreeDepth(Q.id,t.id)&&this.graph.getTreeDepth(J.id,t.id)>1?(J.angle=-t.angle,t.angle>=0?($.angle=o.toRad(30),Q.angle=o.toRad(90)):($.angle=-o.toRad(30),Q.angle=-o.toRad(90)),this.createNextBond(J,t,N+J.angle),this.createNextBond($,t,N+$.angle),this.createNextBond(Q,t,N+Q.angle)):(J.angle=0,$.angle=o.toRad(90),Q.angle=-o.toRad(90),this.createNextBond(J,t,N+J.angle),this.createNextBond($,t,N+$.angle),this.createNextBond(Q,t,N+Q.angle))}else if(4===k.length){var tt=this.graph.getTreeDepth(k[0],t.id),et=this.graph.getTreeDepth(k[1],t.id),it=this.graph.getTreeDepth(k[2],t.id),rt=this.graph.getTreeDepth(k[3],t.id),nt=this.graph.vertices[k[0]],st=this.graph.vertices[k[1]],at=this.graph.vertices[k[2]],ot=this.graph.vertices[k[3]];nt.value.subtreeDepth=tt,st.value.subtreeDepth=et,at.value.subtreeDepth=it,ot.value.subtreeDepth=rt,et>tt&&et>it&&et>rt?(nt=this.graph.vertices[k[1]],st=this.graph.vertices[k[0]],at=this.graph.vertices[k[2]],ot=this.graph.vertices[k[3]]):it>tt&&it>et&&it>rt?(nt=this.graph.vertices[k[2]],st=this.graph.vertices[k[0]],at=this.graph.vertices[k[1]],ot=this.graph.vertices[k[3]]):rt>tt&&rt>et&&rt>it&&(nt=this.graph.vertices[k[3]],st=this.graph.vertices[k[0]],at=this.graph.vertices[k[1]],ot=this.graph.vertices[k[2]]),nt.angle=-o.toRad(36),st.angle=o.toRad(36),at.angle=-o.toRad(108),ot.angle=o.toRad(108),this.createNextBond(nt,t,N+nt.angle),this.createNextBond(st,t,N+st.angle),this.createNextBond(at,t,N+at.angle),this.createNextBond(ot,t,N+ot.angle)}}}}},{key:"getCommonRingbondNeighbour",value:function(t){for(var e=t.neighbours,i=0;i<e.length;i++){var r=this.graph.vertices[e[i]];if(h.containsAll(r.value.rings,t.value.rings))return r}return null}},{key:"isPointInRing",value:function(t){for(var e=0;e<this.rings.length;e++){var i=this.rings[e];if(i.positioned){var r=o.polyCircumradius(this.opts.bondLength,i.getSize()),n=r*r;if(t.distanceSq(i.center)<n)return!0}}return!1}},{key:"isEdgeInRing",value:function(t){var e=this.graph.vertices[t.sourceId],i=this.graph.vertices[t.targetId];return this.areVerticesInSameRing(e,i)}},{key:"isEdgeRotatable",value:function(t){var e=this.graph.vertices[t.sourceId],i=this.graph.vertices[t.targetId];return"-"===t.bondType&&(!e.isTerminal()&&!i.isTerminal()&&!(e.value.rings.length>0&&i.value.rings.length>0&&this.areVerticesInSameRing(e,i)))}},{key:"isRingAromatic",value:function(t){for(var e=0;e<t.members.length;e++){if(!this.graph.vertices[t.members[e]].value.isPartOfAromaticRing)return!1}return!0}},{key:"getEdgeNormals",value:function(t){var e=this.graph.vertices[t.sourceId].position,i=this.graph.vertices[t.targetId].position;return l.units(e,i)}},{key:"getNonRingNeighbours",value:function(t){for(var e=Array(),i=this.graph.vertices[t],r=i.neighbours,n=0;n<r.length;n++){var s=this.graph.vertices[r[n]];0===h.intersection(i.value.rings,s.value.rings).length&&0==s.value.isBridge&&e.push(s)}return e}},{key:"annotateStereochemistry",value:function(){for(var t=0;t<this.graph.vertices.length;t++){var e=this.graph.vertices[t];if(e.value.isStereoCenter){for(var i=e.getNeighbours(),r=i.length,n=Array(r),s=0;s<r;s++){var a=new Uint8Array(this.graph.vertices.length),h=Array(Array());a[e.id]=1,this.visitStereochemistry(i[s],e.id,a,h,10,0);for(var l=0;l<h.length;l++)h[l].sort((function(t,e){return e-t}));n[s]=[s,h]}var u=0,g=0;for(s=0;s<n.length;s++){n[s][1].length>u&&(u=n[s][1].length);for(l=0;l<n[s][1].length;l++)n[s][1][l].length>g&&(g=n[s][1][l].length)}for(s=0;s<n.length;s++){var c=u-n[s][1].length;for(l=0;l<c;l++)n[s][1].push([]);n[s][1].push([i[s]]);for(l=0;l<n[s][1].length;l++)for(var d=g-n[s][1][l].length,v=0;v<d;v++)n[s][1][l].push(0)}n.sort((function(t,e){for(var i=0;i<t[1].length;i++)for(var r=0;r<t[1][i].length;r++){if(t[1][i][r]>e[1][i][r])return-1;if(t[1][i][r]<e[1][i][r])return 1}return 0}));var f=new Uint8Array(r);for(s=0;s<r;s++)f[s]=n[s][0],e.value.priority=s;var p=this.graph.vertices[i[f[0]]].position,m=this.graph.vertices[i[f[1]]].position,y=this.graph.vertices[i[f[2]]].position,b=p.relativeClockwise(m,e.position),w=(p.relativeClockwise(y,e.position),-1===b),S="@"===e.value.bracket.chirality?-1:1,x=o.parityOfPermutation(f)*S===1?"R":"S",A="down",C="up";(w&&"R"!==x||!w&&"S"!==x)&&(e.value.hydrogenDirection="up",A="up",C="down"),e.value.hasHydrogen&&(this.graph.getEdge(e.id,i[f[f.length-1]]).wedge=A);var k=new Array(i.length-1),N=e.value.rings.length>1&&e.value.hasHydrogen,R=e.value.hasHydrogen?1:0;for(s=0;s<f.length-R;s++){k[s]=new Uint32Array(2);var T=this.graph.vertices[i[f[s]]];k[s][0]+=T.value.isStereoCenter?0:1e5,k[s][0]+=this.areVerticesInSameRing(T,e)?0:1e4,k[s][0]+=T.value.isHeteroAtom()?1e3:0,k[s][0]-=0===T.value.subtreeDepth?1e3:0,k[s][0]+=1e3-T.value.subtreeDepth,k[s][1]=i[f[s]]}if(k.sort((function(t,e){return t[0]>e[0]?-1:t[0]<e[0]?1:0})),!N){var B=k[0][1];if(e.value.hasHydrogen)this.graph.getEdge(e.id,B).wedge=C;else{var I=C;for(s=f.length-1;s>=0&&(I=I===A?C:A,i[f[s]]!==B);s--);this.graph.getEdge(e.id,B).wedge=I}}e.value.chirality=x}}}},{key:"visitStereochemistry",value:function(t,e,i,r,n,s){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;i[t]=1;var o=this.graph.vertices[t],h=o.value.getAtomicNumber();r.length<=s&&r.push(Array());for(var l=0;l<this.graph.getEdge(t,e).weight;l++)r[s].push(1e3*a+h);var u=this.graph.vertices[t].neighbours;for(l=0;l<u.length;l++)1!==i[u[l]]&&s<n-1&&this.visitStereochemistry(u[l],t,i.slice(),r,n,s+1,h);if(s<n-1){var g=0;for(l=0;l<u.length;l++)g+=this.graph.getEdge(t,u[l]).weight;for(l=0;l<o.value.getMaxBonds()-g;l++)r.length<=s+1&&r.push(Array()),r[s+1].push(1e3*h+1)}}},{key:"initPseudoElements",value:function(){for(var t=0;t<this.graph.vertices.length;t++){for(var e=this.graph.vertices[t],i=e.neighbours,r=Array(i.length),n=0;n<i.length;n++)r[n]=this.graph.vertices[i[n]];if(!(e.getNeighbourCount()<3||e.value.rings.length>0)&&("P"!==e.value.element&&("C"!==e.value.element||3!==r.length||"N"!==r[0].value.element||"N"!==r[1].value.element||"N"!==r[2].value.element))){var s=0,a=0;for(n=0;n<r.length;n++){var o=r[n],h=o.value.element,l=o.getNeighbourCount();"C"!==h&&"H"!==h&&1===l&&s++,l>1&&a++}if(!(a>1||s<2)){var u=null;for(n=0;n<r.length;n++){var g=r[n];g.getNeighbourCount()>1&&(u=g)}for(n=0;n<r.length;n++){var d=r[n];if(!(d.getNeighbourCount()>1)){d.value.isDrawn=!1;var v=c.maxBonds[d.value.element]-d.value.bondCount,f="";d.value.bracket&&(v=d.value.bracket.hcount,f=d.value.bracket.charge||0),e.value.attachPseudoElement(d.value.element,u?u.value.element:null,v,f)}}}}}for(t=0;t<this.graph.vertices.length;t++){var p=this.graph.vertices[t],m=p.value,y=m.element;if("C"!==y&&"H"!==y&&m.isDrawn){var b=p.neighbours,w=Array(b.length);for(n=0;n<b.length;n++)w[n]=this.graph.vertices[b[n]];for(n=0;n<w.length;n++){var S=w[n].value;if(S.hasAttachedPseudoElements&&2===S.getAttachedPseudoElementsCount()){var x=S.getAttachedPseudoElements();x.hasOwnProperty("0O")&&x.hasOwnProperty("3C")&&(S.isDrawn=!1,p.value.attachPseudoElement("Ac","",0))}}}}}}]),t}();t.exports=w},8674:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=function(){"use strict";function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;r(this,t),this.id=null,this.sourceId=e,this.targetId=i,this.weight=n,this.bondType="-",this.isPartOfAromaticRing=!1,this.center=!1,this.wedge=""}return n(t,[{key:"setBondType",value:function(e){this.bondType=e,this.weight=t.bonds[e]}}],[{key:"bonds",get:function(){return{"-":1,"/":1,"\\":1,"=":2,"#":3,$:4}}}]),t}();t.exports=s},1153:function(t){t.exports={C2H4O2:"acetic acid",C3H6O:"acetone",C2H3N:"acetonitrile",C6H6:"benzene",CCl4:"carbon tetrachloride",C6H5Cl:"chlorobenzene",CHCl3:"chloroform",C6H12:"cyclohexane",C2H4Cl2:"1,2-dichloroethane",C4H10O3:"diethylene glycol",C6H14O3:"diglyme",C4H10O2:"DME",C3H7NO:"DMF",C2H6OS:"DMSO",C2H6O:"ethanol",C2H6O2:"ethylene glycol",C3H8O3:"glycerin",C7H16:"heptane",C6H18N3OP:"HMPA",C6H18N3P:"HMPT",C6H14:"hexane",CH4O:"methanol",C5H12O:"MTBE",CH2Cl2:"methylene chloride",CH5H9NO:"NMP",CH3NO2:"nitromethane",C5H12:"pentane",C5H5N:"pyridine",C7H8:"toluene",C6H15N:"triethyl amine",H2O:"water"}},5901:function(t,e,i){var r=i(7424).default,n=i(6690).default,s=i(9728).default,a=i(5013),o=(i(8357),i(1965)),h=i(8674),l=(i(648),i(8666)),u=function(){"use strict";function t(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(this,t),this.vertices=Array(),this.edges=Array(),this.vertexIdsToEdgeId={},this.isomeric=i,this._time=0,this._init(e)}return s(t,[{key:"_init",value:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=new l(t.atom.element?t.atom.element:t.atom,t.bond);r.branchBond=t.branchBond,r.ringbonds=t.ringbonds,r.bracket=t.atom.element?t.atom:null,r.class=t.atom.class;var n=new o(r),s=this.vertices[e];if(this.addVertex(n),null!==e){n.setParentVertexId(e),n.value.addNeighbouringElement(s.value.element),s.addChild(n.id),s.value.addNeighbouringElement(r.element),s.spanningTreeChildren.push(n.id);var a=new h(e,n.id,1);i?(a.setBondType(n.value.branchBond||"-"),n.id,a.setBondType(n.value.branchBond||"-"),n.id):(a.setBondType(s.value.bondType||"-"),s.id);this.addEdge(a)}var u=t.ringbondCount+1;r.bracket&&(u+=r.bracket.hcount);var g=0;if(r.bracket&&r.bracket.chirality){r.isStereoCenter=!0,g=r.bracket.hcount;for(var c=0;c<g;c++)this._init({atom:"H",isBracket:"false",branches:Array(),branchCount:0,ringbonds:Array(),ringbondCount:!1,next:null,hasNext:!1,bond:"-"},c,n.id,!0)}for(c=0;c<t.branchCount;c++)this._init(t.branches[c],c+u,n.id,!0);t.hasNext&&this._init(t.next,t.branchCount+u,n.id)}},{key:"clear",value:function(){this.vertices=Array(),this.edges=Array(),this.vertexIdsToEdgeId={}}},{key:"addVertex",value:function(t){return t.id=this.vertices.length,this.vertices.push(t),t.id}},{key:"addEdge",value:function(t){var e=this.vertices[t.sourceId],i=this.vertices[t.targetId];return t.id=this.edges.length,this.edges.push(t),this.vertexIdsToEdgeId[t.sourceId+"_"+t.targetId]=t.id,this.vertexIdsToEdgeId[t.targetId+"_"+t.sourceId]=t.id,t.isPartOfAromaticRing=e.value.isPartOfAromaticRing&&i.value.isPartOfAromaticRing,e.value.bondCount+=t.weight,i.value.bondCount+=t.weight,e.edges.push(t.id),i.edges.push(t.id),t.id}},{key:"getEdge",value:function(t,e){var i=this.vertexIdsToEdgeId[t+"_"+e];return void 0===i?null:this.edges[i]}},{key:"getEdges",value:function(t){for(var e=Array(),i=this.vertices[t],r=0;r<i.neighbours.length;r++)e.push(this.vertexIdsToEdgeId[t+"_"+i.neighbours[r]]);return e}},{key:"hasEdge",value:function(t,e){return void 0!==this.vertexIdsToEdgeId[t+"_"+e]}},{key:"getVertexList",value:function(){for(var t=[this.vertices.length],e=0;e<this.vertices.length;e++)t[e]=this.vertices[e].id;return t}},{key:"getEdgeList",value:function(){for(var t=Array(this.edges.length),e=0;e<this.edges.length;e++)t[e]=[this.edges[e].sourceId,this.edges[e].targetId];return t}},{key:"getAdjacencyMatrix",value:function(){for(var t=this.vertices.length,e=Array(t),i=0;i<t;i++)e[i]=new Array(t),e[i].fill(0);for(i=0;i<this.edges.length;i++){var r=this.edges[i];e[r.sourceId][r.targetId]=1,e[r.targetId][r.sourceId]=1}return e}},{key:"getComponentsAdjacencyMatrix",value:function(){for(var t=this.vertices.length,e=Array(t),i=this.getBridges(),r=0;r<t;r++)e[r]=new Array(t),e[r].fill(0);for(r=0;r<this.edges.length;r++){var n=this.edges[r];e[n.sourceId][n.targetId]=1,e[n.targetId][n.sourceId]=1}for(r=0;r<i.length;r++)e[i[r][0]][i[r][1]]=0,e[i[r][1]][i[r][0]]=0;return e}},{key:"getSubgraphAdjacencyMatrix",value:function(t){for(var e=t.length,i=Array(e),r=0;r<e;r++){i[r]=new Array(e),i[r].fill(0);for(var n=0;n<e;n++)r!==n&&this.hasEdge(t[r],t[n])&&(i[r][n]=1)}return i}},{key:"getDistanceMatrix",value:function(){for(var t=this.vertices.length,e=this.getAdjacencyMatrix(),i=Array(t),r=0;r<t;r++)i[r]=Array(t),i[r].fill(1/0);for(r=0;r<t;r++)for(var n=0;n<t;n++)1===e[r][n]&&(i[r][n]=1);for(var s=0;s<t;s++)for(r=0;r<t;r++)for(n=0;n<t;n++)i[r][n]>i[r][s]+i[s][n]&&(i[r][n]=i[r][s]+i[s][n]);return i}},{key:"getSubgraphDistanceMatrix",value:function(t){for(var e=t.length,i=this.getSubgraphAdjacencyMatrix(t),r=Array(e),n=0;n<e;n++)r[n]=Array(e),r[n].fill(1/0);for(n=0;n<e;n++)for(var s=0;s<e;s++)1===i[n][s]&&(r[n][s]=1);for(var a=0;a<e;a++)for(n=0;n<e;n++)for(s=0;s<e;s++)r[n][s]>r[n][a]+r[a][s]&&(r[n][s]=r[n][a]+r[a][s]);return r}},{key:"getAdjacencyList",value:function(){for(var t=this.vertices.length,e=Array(t),i=0;i<t;i++){e[i]=[];for(var r=0;r<t;r++)i!==r&&this.hasEdge(this.vertices[i].id,this.vertices[r].id)&&e[i].push(r)}return e}},{key:"getSubgraphAdjacencyList",value:function(t){for(var e=t.length,i=Array(e),r=0;r<e;r++){i[r]=Array();for(var n=0;n<e;n++)r!==n&&this.hasEdge(t[r],t[n])&&i[r].push(n)}return i}},{key:"getBridges",value:function(){var t=this.vertices.length,e=new Array(t),i=new Array(t),r=new Array(t),n=new Array(t),s=this.getAdjacencyList(),a=Array();e.fill(!1),n.fill(null),this._time=0;for(var o=0;o<t;o++)e[o]||this._bridgeDfs(o,e,i,r,n,s,a);return a}},{key:"traverseBF",value:function(t,e){var i=this.vertices.length,r=new Array(i);r.fill(!1);for(var n=[t];n.length>0;){var s=n.shift(),a=this.vertices[s];e(a);for(var o=0;o<a.neighbours.length;o++){var h=a.neighbours[o];r[h]||(r[h]=!0,n.push(h))}}}},{key:"getTreeDepth",value:function(t,e){if(null===t||null===e)return 0;for(var i=this.vertices[t].getSpanningTreeNeighbours(e),r=0,n=0;n<i.length;n++){var s=i[n],a=this.getTreeDepth(s,t);a>r&&(r=a)}return r+1}},{key:"traverseTree",value:function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:999999,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null===a&&(a=new Uint8Array(this.vertices.length)),!(s>r+1||1===a[t])){a[t]=1;var o=this.vertices[t],h=o.getNeighbours(e);(!n||s>1)&&i(o);for(var l=0;l<h.length;l++)this.traverseTree(h[l],t,i,r,n,s+1,a)}}},{key:"kkLayout",value:function(t,e,i,n,s){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.1,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2e3,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:50,g=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1e9,c=s,d=t.length;d--;)var v=this.vertices[t[d]].neighbours.length;var f=this.getSubgraphDistanceMatrix(t),p=t.length,m=a.polyCircumradius(500,p),y=a.centralAngle(p),b=0,w=new Float32Array(p),S=new Float32Array(p),x=Array(p);for(d=p;d--;){var A=this.vertices[t[d]];A.positioned?(w[d]=A.position.x,S[d]=A.position.y):(w[d]=e.x+Math.cos(b)*m,S[d]=e.y+Math.sin(b)*m),x[d]=A.positioned,b+=y}var C=Array(p);for(d=p;d--;){C[d]=new Array(p);for(v=p;v--;)C[d][v]=s*f[d][v]}var k=Array(p);for(d=p;d--;){k[d]=Array(p);for(v=p;v--;)k[d][v]=c*Math.pow(f[d][v],-2)}var N,R,T,B,I,E,L,P=Array(p),M=new Float32Array(p),O=new Float32Array(p);for(d=p;d--;)P[d]=Array(p);for(d=p;d--;){N=w[d],R=S[d],T=0,B=0;for(var D=p;D--;)d!==D&&(I=w[D],E=S[D],L=1/Math.sqrt((N-I)*(N-I)+(R-E)*(R-E)),P[d][D]=[k[d][D]*(N-I-C[d][D]*(N-I)*L),k[d][D]*(R-E-C[d][D]*(R-E)*L)],P[D][d]=P[d][D],T+=P[d][D][0],B+=P[d][D][1]);M[d]=T,O[d]=B}for(var H=function(t){return[M[t]*M[t]+O[t]*O[t],M[t],O[t]]},z=function(){var t=0,e=0,i=0,n=0;for(d=p;d--;){var s=H(d),a=r(s,3),o=a[0],h=a[1],l=a[2];o>t&&!1===x[d]&&(t=o,e=d,i=h,n=l)}return[e,t,i,n]},F=function(t,e,i){var r=0,n=0,s=0,a=w[t],o=S[t],h=C[t],l=k[t];for(d=p;d--;)if(d!==t){var u=w[d],g=S[d],c=h[d],v=l[d],f=(a-u)*(a-u),m=1/Math.pow(f+(o-g)*(o-g),1.5);r+=v*(1-c*(o-g)*(o-g)*m),n+=v*(1-c*f*m),s+=v*(c*(a-u)*(o-g)*m)}0===r&&(r=.1),0===n&&(n=.1),0===s&&(s=.1);var y=e/r+i/s,b=-(s*(y/=s/r-n/s)+e)/r;w[t]+=b,S[t]+=y;var x,A,N,R,T,B=P[t];for(e=0,i=0,a=w[t],o=S[t],d=p;d--;)t!==d&&(x=w[d],A=S[d],N=B[d][0],R=B[d][1],T=1/Math.sqrt((a-x)*(a-x)+(o-A)*(o-A)),b=l[d]*(a-x-h[d]*(a-x)*T),y=l[d]*(o-A-h[d]*(o-A)*T),B[d]=[b,y],e+=b,i+=y,M[d]+=b-N,O[d]+=y-R);M[t]=e,O[t]=i},V=0,W=0,_=0,U=0,X=0,Y=0;g>o&&l>X;){X++;var j=z(),q=r(j,4);for(V=q[0],g=q[1],W=q[2],_=q[3],U=g,Y=0;U>h&&u>Y;){Y++,F(V,W,_);var G=H(V),K=r(G,3);U=K[0],W=K[1],_=K[2]}}for(d=p;d--;){var Z=t[d],J=this.vertices[Z];J.position.x=w[d],J.position.y=S[d],J.positioned=!0,J.forcePositioned=!0}}},{key:"_bridgeDfs",value:function(t,e,i,r,n,s,a){e[t]=!0,i[t]=r[t]=++this._time;for(var o=0;o<s[t].length;o++){var h=s[t][o];e[h]?h!==n[t]&&(r[t]=Math.min(r[t],i[h])):(n[h]=t,this._bridgeDfs(h,e,i,r,n,s,a),r[t]=Math.min(r[t],r[h]),r[h]>i[t]&&a.push([t,h]))}}}],[{key:"getConnectedComponents",value:function(e){var i=e.length,r=new Array(i),n=new Array;r.fill(!1);for(var s=0;s<i;s++)if(!r[s]){var a=Array();r[s]=!0,a.push(s),t._ccGetDfs(s,r,e,a),a.length>1&&n.push(a)}return n}},{key:"getConnectedComponentCount",value:function(e){var i=e.length,r=new Array(i),n=0;r.fill(!1);for(var s=0;s<i;s++)r[s]||(r[s]=!0,n++,t._ccCountDfs(s,r,e));return n}},{key:"_ccCountDfs",value:function(e,i,r){for(var n=0;n<r[e].length;n++){r[e][n]&&!i[n]&&e!==n&&(i[n]=!0,t._ccCountDfs(n,i,r))}}},{key:"_ccGetDfs",value:function(e,i,r,n){for(var s=0;s<r[e].length;s++){r[e][s]&&!i[s]&&e!==s&&(i[s]=!0,n.push(s),t._ccGetDfs(s,i,r,n))}}}]),t}();t.exports=u},1423:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=i(8357),a=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s(0,0),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s(0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h=arguments.length>5&&void 0!==arguments[5]&&arguments[5];r(this,t),this.from=e,this.to=i,this.elementFrom=n,this.elementTo=a,this.chiralFrom=o,this.chiralTo=h}return n(t,[{key:"clone",value:function(){return new t(this.from.clone(),this.to.clone(),this.elementFrom,this.elementTo)}},{key:"getLength",value:function(){return Math.sqrt(Math.pow(this.to.x-this.from.x,2)+Math.pow(this.to.y-this.from.y,2))}},{key:"getAngle",value:function(){return s.subtract(this.getRightVector(),this.getLeftVector()).angle()}},{key:"getRightVector",value:function(){return this.from.x<this.to.x?this.to:this.from}},{key:"getLeftVector",value:function(){return this.from.x<this.to.x?this.from:this.to}},{key:"getRightElement",value:function(){return this.from.x<this.to.x?this.elementTo:this.elementFrom}},{key:"getLeftElement",value:function(){return this.from.x<this.to.x?this.elementFrom:this.elementTo}},{key:"getRightChiral",value:function(){return this.from.x<this.to.x?this.chiralTo:this.chiralFrom}},{key:"getLeftChiral",value:function(){return this.from.x<this.to.x?this.chiralFrom:this.chiralTo}},{key:"setRightVector",value:function(t,e){return this.from.x<this.to.x?(this.to.x=t,this.to.y=e):(this.from.x=t,this.from.y=e),this}},{key:"setLeftVector",value:function(t,e){return this.from.x<this.to.x?(this.from.x=t,this.from.y=e):(this.to.x=t,this.to.y=e),this}},{key:"rotateToXAxis",value:function(){var t=this.getLeftVector();return this.setRightVector(t.x+this.getLength(),t.y),this}},{key:"rotate",value:function(t){var e=this.getLeftVector(),i=this.getRightVector(),r=Math.sin(t),n=Math.cos(t),s=n*(i.x-e.x)-r*(i.y-e.y)+e.x,a=r*(i.x-e.x)-n*(i.y-e.y)+e.y;return this.setRightVector(s,a),this}},{key:"shortenFrom",value:function(t){var e=s.subtract(this.to,this.from);return e.normalize(),e.multiplyScalar(t),this.from.add(e),this}},{key:"shortenTo",value:function(t){var e=s.subtract(this.from,this.to);return e.normalize(),e.multiplyScalar(t),this.to.add(e),this}},{key:"shortenRight",value:function(t){return this.from.x<this.to.x?this.shortenTo(t):this.shortenFrom(t),this}},{key:"shortenLeft",value:function(t){return this.from.x<this.to.x?this.shortenFrom(t):this.shortenTo(t),this}},{key:"shorten",value:function(t){var e=s.subtract(this.from,this.to);return e.normalize(),e.multiplyScalar(t/2),this.to.add(e),this.from.subtract(e),this}}]),t}();t.exports=a},5013:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=function(){"use strict";function t(){r(this,t)}return n(t,null,[{key:"round",value:function(t,e){return e=e||1,Number(Math.round(t+"e"+e)+"e-"+e)}},{key:"meanAngle",value:function(t){for(var e=0,i=0,r=0;r<t.length;r++)e+=Math.sin(t[r]),i+=Math.cos(t[r]);return Math.atan2(e/t.length,i/t.length)}},{key:"innerAngle",value:function(e){return t.toRad(180*(e-2)/e)}},{key:"polyCircumradius",value:function(t,e){return t/(2*Math.sin(Math.PI/e))}},{key:"apothem",value:function(t,e){return t*Math.cos(Math.PI/e)}},{key:"apothemFromSideLength",value:function(e,i){var r=t.polyCircumradius(e,i);return t.apothem(r,i)}},{key:"centralAngle",value:function(e){return t.toRad(360/e)}},{key:"toDeg",value:function(e){return e*t.degFactor}},{key:"toRad",value:function(e){return e*t.radFactor}},{key:"parityOfPermutation",value:function(t){for(var e=new Uint8Array(t.length),i=0,r=function i(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 1===e[r]?n:(n++,e[r]=1,i(t[r],n))},n=0;n<t.length;n++){if(1!==e[n])i+=1-r(n)%2}return i%2?-1:1}},{key:"radFactor",get:function(){return Math.PI/180}},{key:"degFactor",get:function(){return 180/Math.PI}},{key:"twoPI",get:function(){return 2*Math.PI}}]),t}();t.exports=s},2181:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=function(){"use strict";function t(){r(this,t)}return n(t,null,[{key:"extend",value:function(){var t=this,e={},i=!1,r=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(i=arguments[0],r++);for(var s=function(r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i&&"[object Object]"===Object.prototype.toString.call(r[n])?e[n]=t.extend(!0,e[n],r[n]):e[n]=r[n])};r<n;r++){s(arguments[r])}return e}}]),t}();t.exports=s},9128:function(t){t.exports=function(){"use strict";function t(e,i,r,n){this.message=e,this.expected=i,this.found=r,this.location=n,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}(t,Error),t.buildMessage=function(t,e){var i={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,i="";for(e=0;e<t.parts.length;e++)i+=t.parts[e]instanceof Array?s(t.parts[e][0])+"-"+s(t.parts[e][1]):s(t.parts[e]);return"["+(t.inverted?"^":"")+i+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function s(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}return"Expected "+function(t){var e,r,n,s=new Array(t.length);for(e=0;e<t.length;e++)s[e]=(n=t[e],i[n.type](n));if(s.sort(),s.length>0){for(e=1,r=1;e<s.length;e++)s[e-1]!==s[e]&&(s[r]=s[e],r++);s.length=r}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:function(e,i){if(i=void 0!==i?i:{},e.split("(").length-1!==e.split(")").length-1)throw Ut("The number of opening parentheses does not match the number of closing parentheses.",0);var r,n={},s={chain:Yt},a=Yt,o=function(t){for(var e=[],i=[],r=0;r<t[1].length;r++)e.push(t[1][r]);for(r=0;r<t[2].length;r++){var n=t[2][r][0]?t[2][r][0]:"-";i.push({bond:n,id:t[2][r][1]})}for(r=0;r<t[3].length;r++)e.push(t[3][r]);for(r=0;r<t[6].length;r++)e.push(t[6][r]);return{atom:t[0],isBracket:!!t[0].element,branches:e,branchCount:e.length,ringbonds:i,ringbondCount:i.length,bond:t[4]?t[4]:"-",next:t[5],hasNext:!!t[5]}},h="(",l=zt("(",!1),u=")",g=zt(")",!1),c=function(t){var e=t[1]?t[1]:"-";return t[2].branchBond=e,t[2]},d=function(t){return t},v=/^[\-=#$:\/\\.]/,f=Ft(["-","=","#","$",":","/","\\","."],!1,!1),p=function(t){return t},m="[",y=zt("[",!1),b="se",w=zt("se",!1),S="as",x=zt("as",!1),A="]",C=zt("]",!1),k=function(t){return{isotope:t[1],element:t[2],chirality:t[3],hcount:t[4],charge:t[5],class:t[6]}},N="B",R=zt("B",!1),T="r",B=zt("r",!1),I="C",E=zt("C",!1),L="l",P=zt("l",!1),M=/^[NOPSFI]/,O=Ft(["N","O","P","S","F","I"],!1,!1),D=function(t){return t.length>1?t.join(""):t},H=/^[bcnops]/,z=Ft(["b","c","n","o","p","s"],!1,!1),F="*",V=zt("*",!1),W=function(t){return t},_=/^[A-Z]/,U=Ft([["A","Z"]],!1,!1),X=/^[a-z]/,Y=Ft([["a","z"]],!1,!1),j=function(t){return t.join("")},q="%",G=zt("%",!1),K=/^[1-9]/,Z=Ft([["1","9"]],!1,!1),J=/^[0-9]/,$=Ft([["0","9"]],!1,!1),Q=function(t){return 1==t.length?Number(t):Number(t.join("").replace("%",""))},tt="@",et=zt("@",!1),it="TH",rt=zt("TH",!1),nt=/^[12]/,st=Ft(["1","2"],!1,!1),at="AL",ot=zt("AL",!1),ht="SP",lt=zt("SP",!1),ut=/^[1-3]/,gt=Ft([["1","3"]],!1,!1),ct="TB",dt=zt("TB",!1),vt="OH",ft=zt("OH",!1),pt=function(t){return t[1]?"@"==t[1]?"@@":t[1].join("").replace(",",""):"@"},mt=function(t){return t},yt="+",bt=zt("+",!1),wt=function(t){return t[1]?"+"!=t[1]?Number(t[1].join("")):2:1},St="-",xt=zt("-",!1),At=function(t){return t[1]?"-"!=t[1]?-Number(t[1].join("")):-2:-1},Ct="H",kt=zt("H",!1),Nt=function(t){return t[1]?Number(t[1]):1},Rt=":",Tt=zt(":",!1),Bt=/^[0]/,It=Ft(["0"],!1,!1),Et=function(t){return Number(t[1][0]+t[1][1].join(""))},Lt=function(t){return Number(t.join(""))},Pt=0,Mt=[{line:1,column:1}],Ot=0,Dt=[],Ht=0;if("startRule"in i){if(!(i.startRule in s))throw new Error("Can't start parsing from rule \""+i.startRule+'".');a=s[i.startRule]}function zt(t,e){return{type:"literal",text:t,ignoreCase:e}}function Ft(t,e,i){return{type:"class",parts:t,inverted:e,ignoreCase:i}}function Vt(t){var i,r=Mt[t];if(r)return r;for(i=t-1;!Mt[i];)i--;for(r={line:(r=Mt[i]).line,column:r.column};i<t;)10===e.charCodeAt(i)?(r.line++,r.column=1):r.column++,i++;return Mt[t]=r,r}function Wt(t,e){var i=Vt(t),r=Vt(e);return{start:{offset:t,line:i.line,column:i.column},end:{offset:e,line:r.line,column:r.column}}}function _t(t){Pt<Ot||(Pt>Ot&&(Ot=Pt,Dt=[]),Dt.push(t))}function Ut(e,i){return new t(e,null,null,i)}function Xt(e,i,r){return new t(t.buildMessage(e,i),e,i,r)}function Yt(){var t,i,r,s,a,h,l,u,g,c;if(t=Pt,i=Pt,r=function(){var t,i;t=Pt,i=function(){var t,i,r,s;t=Pt,i=Pt,66===e.charCodeAt(Pt)?(r=N,Pt++):(r=n,0===Ht&&_t(R));r!==n?(114===e.charCodeAt(Pt)?(s=T,Pt++):(s=n,0===Ht&&_t(B)),s===n&&(s=null),s!==n?i=r=[r,s]:(Pt=i,i=n)):(Pt=i,i=n);i===n&&(i=Pt,67===e.charCodeAt(Pt)?(r=I,Pt++):(r=n,0===Ht&&_t(E)),r!==n?(108===e.charCodeAt(Pt)?(s=L,Pt++):(s=n,0===Ht&&_t(P)),s===n&&(s=null),s!==n?i=r=[r,s]:(Pt=i,i=n)):(Pt=i,i=n),i===n&&(M.test(e.charAt(Pt))?(i=e.charAt(Pt),Pt++):(i=n,0===Ht&&_t(O))));i!==n&&(t,i=D(i));return t=i,t}(),i===n&&(i=Gt())===n&&(i=function(){var t,i,r,s,a,o,h,l,u,g;t=Pt,i=Pt,91===e.charCodeAt(Pt)?(r=m,Pt++):(r=n,0===Ht&&_t(y));r!==n?(s=function(){var t,i,r,s,a;t=Pt,i=Pt,K.test(e.charAt(Pt))?(r=e.charAt(Pt),Pt++):(r=n,0===Ht&&_t(Z));r!==n?(J.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=n,0===Ht&&_t($)),s===n&&(s=null),s!==n?(J.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=n,0===Ht&&_t($)),a===n&&(a=null),a!==n?i=r=[r,s,a]:(Pt=i,i=n)):(Pt=i,i=n)):(Pt=i,i=n);i!==n&&(t,i=Lt(i));return t=i,t}(),s===n&&(s=null),s!==n?(e.substr(Pt,2)===b?(a=b,Pt+=2):(a=n,0===Ht&&_t(w)),a===n&&(e.substr(Pt,2)===S?(a=S,Pt+=2):(a=n,0===Ht&&_t(x)),a===n&&(a=Gt())===n&&(a=function(){var t,i,r,s;t=Pt,i=Pt,_.test(e.charAt(Pt))?(r=e.charAt(Pt),Pt++):(r=n,0===Ht&&_t(U));r!==n?(X.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=n,0===Ht&&_t(Y)),s===n&&(s=null),s!==n?i=r=[r,s]:(Pt=i,i=n)):(Pt=i,i=n);i!==n&&(t,i=j(i));return t=i,t}(),a===n&&(a=Kt()))),a!==n?(o=function(){var t,i,r,s,a,o,h;t=Pt,i=Pt,64===e.charCodeAt(Pt)?(r=tt,Pt++):(r=n,0===Ht&&_t(et));r!==n?(64===e.charCodeAt(Pt)?(s=tt,Pt++):(s=n,0===Ht&&_t(et)),s===n&&(s=Pt,e.substr(Pt,2)===it?(a=it,Pt+=2):(a=n,0===Ht&&_t(rt)),a!==n?(nt.test(e.charAt(Pt))?(o=e.charAt(Pt),Pt++):(o=n,0===Ht&&_t(st)),o!==n?s=a=[a,o]:(Pt=s,s=n)):(Pt=s,s=n),s===n&&(s=Pt,e.substr(Pt,2)===at?(a=at,Pt+=2):(a=n,0===Ht&&_t(ot)),a!==n?(nt.test(e.charAt(Pt))?(o=e.charAt(Pt),Pt++):(o=n,0===Ht&&_t(st)),o!==n?s=a=[a,o]:(Pt=s,s=n)):(Pt=s,s=n),s===n&&(s=Pt,e.substr(Pt,2)===ht?(a=ht,Pt+=2):(a=n,0===Ht&&_t(lt)),a!==n?(ut.test(e.charAt(Pt))?(o=e.charAt(Pt),Pt++):(o=n,0===Ht&&_t(gt)),o!==n?s=a=[a,o]:(Pt=s,s=n)):(Pt=s,s=n),s===n&&(s=Pt,e.substr(Pt,2)===ct?(a=ct,Pt+=2):(a=n,0===Ht&&_t(dt)),a!==n?(K.test(e.charAt(Pt))?(o=e.charAt(Pt),Pt++):(o=n,0===Ht&&_t(Z)),o!==n?(J.test(e.charAt(Pt))?(h=e.charAt(Pt),Pt++):(h=n,0===Ht&&_t($)),h===n&&(h=null),h!==n?s=a=[a,o,h]:(Pt=s,s=n)):(Pt=s,s=n)):(Pt=s,s=n),s===n&&(s=Pt,e.substr(Pt,2)===vt?(a=vt,Pt+=2):(a=n,0===Ht&&_t(ft)),a!==n?(K.test(e.charAt(Pt))?(o=e.charAt(Pt),Pt++):(o=n,0===Ht&&_t(Z)),o!==n?(J.test(e.charAt(Pt))?(h=e.charAt(Pt),Pt++):(h=n,0===Ht&&_t($)),h===n&&(h=null),h!==n?s=a=[a,o,h]:(Pt=s,s=n)):(Pt=s,s=n)):(Pt=s,s=n)))))),s===n&&(s=null),s!==n?i=r=[r,s]:(Pt=i,i=n)):(Pt=i,i=n);i!==n&&(t,i=pt(i));return t=i,t}(),o===n&&(o=null),o!==n?(h=function(){var t,i,r,s;t=Pt,i=Pt,72===e.charCodeAt(Pt)?(r=Ct,Pt++):(r=n,0===Ht&&_t(kt));r!==n?(J.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=n,0===Ht&&_t($)),s===n&&(s=null),s!==n?i=r=[r,s]:(Pt=i,i=n)):(Pt=i,i=n);i!==n&&(t,i=Nt(i));return t=i,t}(),h===n&&(h=null),h!==n?(l=function(){var t,i;t=Pt,i=function(){var t,i,r,s,a,o;t=Pt,i=Pt,43===e.charCodeAt(Pt)?(r=yt,Pt++):(r=n,0===Ht&&_t(bt));r!==n?(43===e.charCodeAt(Pt)?(s=yt,Pt++):(s=n,0===Ht&&_t(bt)),s===n&&(s=Pt,K.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=n,0===Ht&&_t(Z)),a!==n?(J.test(e.charAt(Pt))?(o=e.charAt(Pt),Pt++):(o=n,0===Ht&&_t($)),o===n&&(o=null),o!==n?s=a=[a,o]:(Pt=s,s=n)):(Pt=s,s=n)),s===n&&(s=null),s!==n?i=r=[r,s]:(Pt=i,i=n)):(Pt=i,i=n);i!==n&&(t,i=wt(i));return t=i,t}(),i===n&&(i=function(){var t,i,r,s,a,o;t=Pt,i=Pt,45===e.charCodeAt(Pt)?(r=St,Pt++):(r=n,0===Ht&&_t(xt));r!==n?(45===e.charCodeAt(Pt)?(s=St,Pt++):(s=n,0===Ht&&_t(xt)),s===n&&(s=Pt,K.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=n,0===Ht&&_t(Z)),a!==n?(J.test(e.charAt(Pt))?(o=e.charAt(Pt),Pt++):(o=n,0===Ht&&_t($)),o===n&&(o=null),o!==n?s=a=[a,o]:(Pt=s,s=n)):(Pt=s,s=n)),s===n&&(s=null),s!==n?i=r=[r,s]:(Pt=i,i=n)):(Pt=i,i=n);i!==n&&(t,i=At(i));return t=i,t}());i!==n&&(t,i=mt(i));return t=i,t}(),l===n&&(l=null),l!==n?(u=function(){var t,i,r,s,a,o,h;t=Pt,i=Pt,58===e.charCodeAt(Pt)?(r=Rt,Pt++):(r=n,0===Ht&&_t(Tt));if(r!==n){if(s=Pt,K.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=n,0===Ht&&_t(Z)),a!==n){for(o=[],J.test(e.charAt(Pt))?(h=e.charAt(Pt),Pt++):(h=n,0===Ht&&_t($));h!==n;)o.push(h),J.test(e.charAt(Pt))?(h=e.charAt(Pt),Pt++):(h=n,0===Ht&&_t($));o!==n?s=a=[a,o]:(Pt=s,s=n)}else Pt=s,s=n;s===n&&(Bt.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=n,0===Ht&&_t(It))),s!==n?i=r=[r,s]:(Pt=i,i=n)}else Pt=i,i=n;i!==n&&(t,i=Et(i));return t=i,t}(),u===n&&(u=null),u!==n?(93===e.charCodeAt(Pt)?(g=A,Pt++):(g=n,0===Ht&&_t(C)),g!==n?i=r=[r,s,a,o,h,l,u,g]:(Pt=i,i=n)):(Pt=i,i=n)):(Pt=i,i=n)):(Pt=i,i=n)):(Pt=i,i=n)):(Pt=i,i=n)):(Pt=i,i=n)):(Pt=i,i=n);i!==n&&(t,i=k(i));return t=i,t}(),i===n&&(i=Kt()));i!==n&&(t,i=d(i));return t=i,t}(),r!==n){for(s=[],a=jt();a!==n;)s.push(a),a=jt();if(s!==n){for(a=[],h=Pt,(l=qt())===n&&(l=null),l!==n&&(u=Zt())!==n?h=l=[l,u]:(Pt=h,h=n);h!==n;)a.push(h),h=Pt,(l=qt())===n&&(l=null),l!==n&&(u=Zt())!==n?h=l=[l,u]:(Pt=h,h=n);if(a!==n){for(h=[],l=jt();l!==n;)h.push(l),l=jt();if(h!==n)if((l=qt())===n&&(l=null),l!==n)if((u=Yt())===n&&(u=null),u!==n){for(g=[],c=jt();c!==n;)g.push(c),c=jt();g!==n?i=r=[r,s,a,h,l,u,g]:(Pt=i,i=n)}else Pt=i,i=n;else Pt=i,i=n;else Pt=i,i=n}else Pt=i,i=n}else Pt=i,i=n}else Pt=i,i=n;return i!==n&&(t,i=o(i)),t=i}function jt(){var t,i,r,s,a,o;return t=Pt,i=Pt,40===e.charCodeAt(Pt)?(r=h,Pt++):(r=n,0===Ht&&_t(l)),r!==n?((s=qt())===n&&(s=null),s!==n&&(a=Yt())!==n?(41===e.charCodeAt(Pt)?(o=u,Pt++):(o=n,0===Ht&&_t(g)),o!==n?i=r=[r,s,a,o]:(Pt=i,i=n)):(Pt=i,i=n)):(Pt=i,i=n),i!==n&&(t,i=c(i)),t=i}function qt(){var t,i;if(t=Pt,v.test(e.charAt(Pt))){if((i=e.charAt(Pt))===e.charAt(Pt+1)&&(i=n,0===Ht))throw Ut("The parser encountered a bond repetition.",Pt+1);Pt++}else i=n,0===Ht&&_t(f);return i!==n&&(t,i=p(i)),t=i}function Gt(){var t,i;return t=Pt,H.test(e.charAt(Pt))?(i=e.charAt(Pt),Pt++):(i=n,0===Ht&&_t(z)),i!==n&&(t,i=d(i)),t=i}function Kt(){var t,i;return t=Pt,42===e.charCodeAt(Pt)?(i=F,Pt++):(i=n,0===Ht&&_t(V)),i!==n&&(t,i=W(i)),t=i}function Zt(){var t,i,r,s,a;return t=Pt,i=Pt,37===e.charCodeAt(Pt)?(r=q,Pt++):(r=n,0===Ht&&_t(G)),r!==n?(K.test(e.charAt(Pt))?(s=e.charAt(Pt),Pt++):(s=n,0===Ht&&_t(Z)),s!==n?(J.test(e.charAt(Pt))?(a=e.charAt(Pt),Pt++):(a=n,0===Ht&&_t($)),a!==n?i=r=[r,s,a]:(Pt=i,i=n)):(Pt=i,i=n)):(Pt=i,i=n),i===n&&(J.test(e.charAt(Pt))?(i=e.charAt(Pt),Pt++):(i=n,0===Ht&&_t($))),i!==n&&(t,i=Q(i)),t=i}if((r=a())!==n&&Pt===e.length)return r;throw r!==n&&Pt<e.length&&_t({type:"end"}),Xt(Dt,Ot<e.length?e.charAt(Ot):null,Ot<e.length?Wt(Ot,Ot+1):Wt(Ot,Ot))}}}()},6011:function(t,e,i){var r=i(9728).default,n=i(6690).default,s=i(9128),a=r((function t(e){"use strict";n(this,t),this.reactantsSmiles=[],this.reagentsSmiles=[],this.productsSmiles=[],this.reactants=[],this.reagents=[],this.products=[];var i=e.split(">");if(3!==i.length)throw new Error("Invalid reaction SMILES. Did you add fewer than or more than two '>'?");""!==i[0]&&(this.reactantsSmiles=i[0].split(".")),""!==i[1]&&(this.reagentsSmiles=i[1].split(".")),""!==i[2]&&(this.productsSmiles=i[2].split("."));for(var r=0;r<this.reactantsSmiles.length;r++)this.reactants.push(s.parse(this.reactantsSmiles[r]));for(r=0;r<this.reagentsSmiles.length;r++)this.reagents.push(s.parse(this.reagentsSmiles[r]));for(r=0;r<this.productsSmiles.length;r++)this.products.push(s.parse(this.productsSmiles[r]))}));t.exports=a},7849:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=i(4310),a=i(3907),o=i(2181),h=i(496),l=i(1153),u=function(){"use strict";function t(e,i){r(this,t),this.defaultOptions={scale:i.scale>0?i.scale:1,fontSize:.8*i.fontSizeLarge,fontFamily:"Arial, Helvetica, sans-serif",spacing:10,plus:{size:9,thickness:1},arrow:{length:4*i.bondLength,headSize:6,thickness:1,margin:3}},this.opts=o.extend(!0,this.defaultOptions,e),this.drawer=new s(i),this.molOpts=this.drawer.opts}return n(t,[{key:"draw",value:function(t,e){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"{reagents}",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.themeManager=new h(this.molOpts.themes,r);var u=null;for(null===e||"svg"===e?((u=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("xmlns","http://www.w3.org/2000/svg"),u.setAttributeNS(null,"width","500"),u.setAttributeNS(null,"height","500")):u="string"===typeof e||e instanceof String?document.getElementById(e):e;u.firstChild;)u.removeChild(u.firstChild);for(var g=[],c=0,d=0;d<t.reactants.length;d++){d>0&&g.push({width:this.opts.plus.size*this.opts.scale,height:this.opts.plus.size*this.opts.scale,svg:this.getPlus()});var v=document.createElementNS("http://www.w3.org/2000/svg","svg");this.drawer.draw(t.reactants[d],v,r,o);var f={width:v.viewBox.baseVal.width*this.opts.scale,height:v.viewBox.baseVal.height*this.opts.scale,svg:v};g.push(f),f.height>c&&(c=f.height)}g.push({width:this.opts.arrow.length*this.opts.scale,height:2*this.opts.arrow.headSize*this.opts.scale,svg:this.getArrow()});var p="";for(d=0;d<t.reagents.length;d++){d>0&&(p+=", ");var m=this.drawer.getMolecularFormula(t.reagents[d]);m in l&&(m=l[m]),p+=a.replaceNumbersWithSubscript(m)}n=n.replace("{reagents}",p);var y=a.writeText(n,this.themeManager,this.opts.fontSize*this.opts.scale,this.opts.fontFamily,this.opts.arrow.length*this.opts.scale),b=(this.opts.arrow.length*this.opts.scale-y.width)/2;g.push({svg:y.svg,height:y.height,width:this.opts.arrow.length*this.opts.scale,offsetX:-(this.opts.arrow.length*this.opts.scale+this.opts.spacing)+b,offsetY:-y.height/2-this.opts.arrow.margin,position:"relative"});var w=a.writeText(s,this.themeManager,this.opts.fontSize*this.opts.scale,this.opts.fontFamily,this.opts.arrow.length*this.opts.scale);b=(this.opts.arrow.length*this.opts.scale-w.width)/2,g.push({svg:w.svg,height:w.height,width:this.opts.arrow.length*this.opts.scale,offsetX:-(this.opts.arrow.length*this.opts.scale+this.opts.spacing)+b,offsetY:w.height/2+this.opts.arrow.margin,position:"relative"});for(d=0;d<t.products.length;d++){d>0&&g.push({width:this.opts.plus.size,height:this.opts.plus.size,svg:this.getPlus()});var S=document.createElementNS("http://www.w3.org/2000/svg","svg");this.drawer.draw(t.products[d],S,r,o);var x={width:S.viewBox.baseVal.width*this.opts.scale,height:S.viewBox.baseVal.height*this.opts.scale,svg:S};g.push(x),x.height>c&&(c=x.height)}var A=0;return g.forEach((function(t){var e,r,n=null!==(e=t.offsetX)&&void 0!==e?e:0,s=null!==(r=t.offsetY)&&void 0!==r?r:0;t.svg.setAttributeNS(null,"x",Math.round(A+n)),t.svg.setAttributeNS(null,"y",Math.round((c-t.height)/2+s)),t.svg.setAttributeNS(null,"width",Math.round(t.width)),t.svg.setAttributeNS(null,"height",Math.round(t.height)),u.appendChild(t.svg),"relative"!==t.position&&(A+=Math.round(t.width+i.opts.spacing+n))})),u.setAttributeNS(null,"viewBox","0 0 ".concat(A," ").concat(c)),u.style.width=A+"px",u.style.height=c+"px",u}},{key:"getPlus",value:function(){var t=this.opts.plus.size,e=this.opts.plus.thickness,i=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=document.createElementNS("http://www.w3.org/2000/svg","rect");return i.setAttributeNS(null,"id","plus"),r.setAttributeNS(null,"x",0),r.setAttributeNS(null,"y",t/2-e/2),r.setAttributeNS(null,"width",t),r.setAttributeNS(null,"height",e),r.setAttributeNS(null,"fill",this.themeManager.getColor("C")),n.setAttributeNS(null,"x",t/2-e/2),n.setAttributeNS(null,"y",0),n.setAttributeNS(null,"width",e),n.setAttributeNS(null,"height",t),n.setAttributeNS(null,"fill",this.themeManager.getColor("C")),i.appendChild(r),i.appendChild(n),i.setAttributeNS(null,"viewBox","0 0 ".concat(t," ").concat(t)),i}},{key:"getArrowhead",value:function(){var t=this.opts.arrow.headSize,e=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=document.createElementNS("http://www.w3.org/2000/svg","polygon");return e.setAttributeNS(null,"id","arrowhead"),e.setAttributeNS(null,"viewBox","0 0 ".concat(t," ").concat(t)),e.setAttributeNS(null,"markerUnits","userSpaceOnUse"),e.setAttributeNS(null,"markerWidth",t),e.setAttributeNS(null,"markerHeight",t),e.setAttributeNS(null,"refX",0),e.setAttributeNS(null,"refY",t/2),e.setAttributeNS(null,"orient","auto"),e.setAttributeNS(null,"fill",this.themeManager.getColor("C")),i.setAttributeNS(null,"points","0 0, ".concat(t," ").concat(t/2,", 0 ").concat(t)),e.appendChild(i),e}},{key:"getCDArrowhead",value:function(){var t=this.opts.arrow.headSize,e=t*(7/4.5),i=document.createElementNS("http://www.w3.org/2000/svg","marker"),r=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"id","arrowhead"),i.setAttributeNS(null,"viewBox","0 0 ".concat(e," ").concat(t)),i.setAttributeNS(null,"markerUnits","userSpaceOnUse"),i.setAttributeNS(null,"markerWidth",2*e),i.setAttributeNS(null,"markerHeight",2*t),i.setAttributeNS(null,"refX",2.2),i.setAttributeNS(null,"refY",2.2),i.setAttributeNS(null,"orient","auto"),i.setAttributeNS(null,"fill",this.themeManager.getColor("C")),r.setAttributeNS(null,"style","fill-rule:nonzero;"),r.setAttributeNS(null,"d","m 0 0 l 7 2.25 l -7 2.25 c 0 0 0.735 -1.084 0.735 -2.28 c 0 -1.196 -0.735 -2.22 -0.735 -2.22 z"),i.appendChild(r),i}},{key:"getArrow",value:function(){var t=this.opts.arrow.headSize,e=this.opts.arrow.length,i=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","defs"),n=document.createElementNS("http://www.w3.org/2000/svg","line");return r.appendChild(this.getCDArrowhead()),i.appendChild(r),i.setAttributeNS(null,"id","arrow"),n.setAttributeNS(null,"x1",0),n.setAttributeNS(null,"y1",-this.opts.arrow.thickness/2),n.setAttributeNS(null,"x2",e),n.setAttributeNS(null,"y2",-this.opts.arrow.thickness/2),n.setAttributeNS(null,"stroke-width",this.opts.arrow.thickness),n.setAttributeNS(null,"stroke",this.themeManager.getColor("C")),n.setAttributeNS(null,"marker-end","url(#arrowhead)"),i.appendChild(n),i.setAttributeNS(null,"viewBox","0 ".concat(-t/2," ").concat(e+t*(7/4.5)," ").concat(t)),i}}]),t}();t.exports=u},2992:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=i(6011),a=function(){"use strict";function t(){r(this,t)}return n(t,null,[{key:"parse",value:function(t){return new s(t)}}]),t}();t.exports=a},648:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=i(9521),a=i(8357),o=(i(1965),i(6733)),h=function(){"use strict";function t(e){r(this,t),this.id=null,this.members=e,this.edges=[],this.insiders=[],this.neighbours=[],this.positioned=!1,this.center=new a(0,0),this.rings=[],this.isBridged=!1,this.isPartOfBridged=!1,this.isSpiro=!1,this.isFused=!1,this.centralAngle=0,this.canFlip=!0}return n(t,[{key:"clone",value:function(){var e=new t(this.members);return e.id=this.id,e.insiders=s.clone(this.insiders),e.neighbours=s.clone(this.neighbours),e.positioned=this.positioned,e.center=this.center.clone(),e.rings=s.clone(this.rings),e.isBridged=this.isBridged,e.isPartOfBridged=this.isPartOfBridged,e.isSpiro=this.isSpiro,e.isFused=this.isFused,e.centralAngle=this.centralAngle,e.canFlip=this.canFlip,e}},{key:"getSize",value:function(){return this.members.length}},{key:"getPolygon",value:function(t){for(var e=[],i=0;i<this.members.length;i++)e.push(t[this.members[i]].position);return e}},{key:"getAngle",value:function(){return Math.PI-this.centralAngle}},{key:"eachMember",value:function(t,e,i,r){for(var n=i=i||0===i?i:this.members[0],s=0;null!=n&&s<100;){var a=n;e(a),n=t[n].getNextInRing(t,this.id,r),r=a,n==i&&(n=null),s++}}},{key:"getOrderedNeighbours",value:function(t){for(var e=Array(this.neighbours.length),i=0;i<this.neighbours.length;i++){var r=o.getVertices(t,this.id,this.neighbours[i]);e[i]={n:r.length,neighbour:this.neighbours[i]}}return e.sort((function(t,e){return e.n-t.n})),e}},{key:"isBenzeneLike",value:function(t){var e=this.getDoubleBondCount(t),i=this.members.length;return 3===e&&6===i||2===e&&5===i}},{key:"getDoubleBondCount",value:function(t){for(var e=0,i=0;i<this.members.length;i++){var r=t[this.members[i]].value;"="!==r.bondType&&"="!==r.branchBond||e++}return e}},{key:"contains",value:function(t){for(var e=0;e<this.members.length;e++)if(this.members[e]==t)return!0;return!1}}]),t}();t.exports=h},6733:function(t,e,i){var r=i(861).default,n=i(4704).default,s=i(6690).default,a=i(9728).default,o=(i(1965),i(648),function(){"use strict";function t(e,i){s(this,t),this.id=null,this.firstRingId=e.id,this.secondRingId=i.id,this.vertices=new Set;for(var r=0;r<e.members.length;r++)for(var n=e.members[r],a=0;a<i.members.length;a++){n===i.members[a]&&this.addVertex(n)}}return a(t,[{key:"addVertex",value:function(t){this.vertices.add(t)}},{key:"updateOther",value:function(t,e){this.firstRingId===e?this.secondRingId=t:this.firstRingId=t}},{key:"containsRing",value:function(t){return this.firstRingId===t||this.secondRingId===t}},{key:"isBridge",value:function(t){if(this.vertices.size>2)return!0;var e,i=n(this.vertices);try{for(i.s();!(e=i.n()).done;){if(t[e.value].value.rings.length>2)return!0}}catch(r){i.e(r)}finally{i.f()}return!1}}],[{key:"isBridge",value:function(t,e,i,r){for(var n=null,s=0;s<t.length;s++)if((n=t[s]).firstRingId===i&&n.secondRingId===r||n.firstRingId===r&&n.secondRingId===i)return n.isBridge(e);return!1}},{key:"getNeighbours",value:function(t,e){for(var i=[],r=0;r<t.length;r++){var n=t[r];n.firstRingId===e?i.push(n.secondRingId):n.secondRingId===e&&i.push(n.firstRingId)}return i}},{key:"getVertices",value:function(t,e,i){for(var n=0;n<t.length;n++){var s=t[n];if(s.firstRingId===e&&s.secondRingId===i||s.firstRingId===i&&s.secondRingId===e)return r(s.vertices)}}}]),t}());t.exports=o},1105:function(t,e,i){var r=i(4704).default,n=i(861).default,s=i(6690).default,a=i(9728).default,o=i(5901),h=function(){"use strict";function t(){s(this,t)}return a(t,null,[{key:"getRings",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=e.getComponentsAdjacencyMatrix();if(0===s.length)return null;for(var a=o.getConnectedComponents(s),h=Array(),l=0;l<a.length;l++){for(var u=a[l],g=e.getSubgraphAdjacencyMatrix(n(u)),c=new Uint16Array(g.length),d=new Uint16Array(g.length),v=0;v<g.length;v++){d[v]=0,c[v]=0;for(var f=0;f<g[v].length;f++)c[v]+=g[v][f]}var p=0;for(v=0;v<g.length;v++)for(f=v+1;f<g.length;f++)p+=g[v][f];var m=p-g.length+1,y=!0;for(v=0;v<c.length;v++)3!==c[v]&&(y=!1);if(y&&(m=2+p-g.length),1!==m){i&&(m=999);var b=t.getPathIncludedDistanceMatrices(g),w=b.d,S=b.pe,x=b.pe_prime,A=t.getRingCandidates(w,S,x),C=t.getSSSR(A,w,g,S,x,c,d,m);for(v=0;v<C.length;v++){var k,N=Array(C[v].size),R=0,T=r(C[v]);try{for(T.s();!(k=T.n()).done;){var B=k.value;N[R++]=u[B]}}catch(I){T.e(I)}finally{T.f()}h.push(N)}}else h.push(n(u))}return h}},{key:"matrixToString",value:function(t){for(var e="",i=0;i<t.length;i++){for(var r=0;r<t[i].length;r++)e+=t[i][r]+" ";e+="\n"}return e}},{key:"getPathIncludedDistanceMatrices",value:function(t){for(var e=t.length,i=Array(e),r=Array(e),n=Array(e),s=0,a=0,o=0,h=e;h--;){i[h]=Array(e),r[h]=Array(e),n[h]=Array(e);for(var l=e;l--;)i[h][l]=h===l||1===t[h][l]?t[h][l]:Number.POSITIVE_INFINITY,1===i[h][l]?r[h][l]=[[[h,l]]]:r[h][l]=Array(),n[h][l]=Array()}for(var u=e;u--;)for(h=e;h--;)for(l=e;l--;){var g=i[h][l],c=i[h][u]+i[u][l];if(g>c){if(g===c+1)for(n[h][l]=[r[h][l].length],s=r[h][l].length;s--;)for(n[h][l][s]=[r[h][l][s].length],a=r[h][l][s].length;a--;)for(n[h][l][s][a]=[r[h][l][s][a].length],o=r[h][l][s][a].length;o--;)n[h][l][s][a][o]=[r[h][l][s][a][0],r[h][l][s][a][1]];else n[h][l]=Array();for(i[h][l]=c,r[h][l]=[[]],s=r[h][u][0].length;s--;)r[h][l][0].push(r[h][u][0][s]);for(s=r[u][l][0].length;s--;)r[h][l][0].push(r[u][l][0][s])}else if(g===c){if(r[h][u].length&&r[u][l].length)if(r[h][l].length){var d=Array();for(s=r[h][u][0].length;s--;)d.push(r[h][u][0][s]);for(s=r[u][l][0].length;s--;)d.push(r[u][l][0][s]);r[h][l].push(d)}else{var v=Array();for(s=r[h][u][0].length;s--;)v.push(r[h][u][0][s]);for(s=r[u][l][0].length;s--;)v.push(r[u][l][0][s]);r[h][l][0]=v}}else if(g===c-1){if(n[h][l].length){var f=Array();for(s=r[h][u][0].length;s--;)f.push(r[h][u][0][s]);for(s=r[u][l][0].length;s--;)f.push(r[u][l][0][s]);n[h][l].push(f)}else{var p=Array();for(s=r[h][u][0].length;s--;)p.push(r[h][u][0][s]);for(s=r[u][l][0].length;s--;)p.push(r[u][l][0][s]);n[h][l][0]=p}}}return{d:i,pe:r,pe_prime:n}}},{key:"getRingCandidates",value:function(t,e,i){for(var r=t.length,n=Array(),s=0,a=0;a<r;a++)for(var o=0;o<r;o++)0===t[a][o]||1===e[a][o].length&&0===i[a][o]||(s=0!==i[a][o].length?2*(t[a][o]+.5):2*t[a][o])!==1/0&&n.push([s,e[a][o],i[a][o]]);return n.sort((function(t,e){return t[0]-e[0]})),n}},{key:"getSSSR",value:function(e,i,r,n,s,a,o,h){for(var l=Array(),u=Array(),g=0;g<e.length;g++)if(e[g][0]%2!==0)for(var c=0;c<e[g][2].length;c++){for(var d=e[g][1][0].concat(e[g][2][c]),v=0;v<d.length;v++)d[v][0].constructor===Array&&(d[v]=d[v][0]);var f=t.bondsToAtoms(d);if(t.getBondCount(f,r)!==f.size||t.pathSetsContain(l,f,d,u,a,o)||(l.push(f),u=u.concat(d)),l.length>h)return l}else for(var p=0;p<e[g][1].length-1;p++){var m=e[g][1][p].concat(e[g][1][p+1]);for(v=0;v<m.length;v++)m[v][0].constructor===Array&&(m[v]=m[v][0]);var y=t.bondsToAtoms(m);if(t.getBondCount(y,r)!==y.size||t.pathSetsContain(l,y,m,u,a,o)||(l.push(y),u=u.concat(m)),l.length>h)return l}return l}},{key:"getEdgeCount",value:function(t){for(var e=0,i=t.length,r=i-1;r--;)for(var n=i;n--;)1===t[r][n]&&e++;return e}},{key:"getEdgeList",value:function(t){for(var e=t.length,i=Array(),r=e-1;r--;)for(var n=e;n--;)1===t[r][n]&&i.push([r,n]);return i}},{key:"bondsToAtoms",value:function(t){for(var e=new Set,i=t.length;i--;)e.add(t[i][0]),e.add(t[i][1]);return e}},{key:"getBondCount",value:function(t,e){var i,n=0,s=r(t);try{for(s.s();!(i=s.n()).done;){var a,o=i.value,h=r(t);try{for(h.s();!(a=h.n()).done;){var l=a.value;o!==l&&(n+=e[o][l])}}catch(u){h.e(u)}finally{h.f()}}}catch(u){s.e(u)}finally{s.f()}return n/2}},{key:"pathSetsContain",value:function(e,i,n,s,a,o){for(var h=e.length;h--;){if(t.isSupersetOf(i,e[h]))return!0;if(e[h].size===i.size&&t.areSetsEqual(e[h],i))return!0}var l=0,u=!1;for(h=n.length;h--;)for(var g=s.length;g--;)(n[h][0]===s[g][0]&&n[h][1]===s[g][1]||n[h][1]===s[g][0]&&n[h][0]===s[g][1])&&l++,l===n.length&&(u=!0);var c=!1;if(u){var d,v=r(i);try{for(v.s();!(d=v.n()).done;){var f=d.value;if(o[f]<a[f]){c=!0;break}}}catch(y){v.e(y)}finally{v.f()}}if(u&&!c)return!0;var p,m=r(i);try{for(m.s();!(p=m.n()).done;){o[p.value]++}}catch(y){m.e(y)}finally{m.f()}return!1}},{key:"areSetsEqual",value:function(t,e){if(t.size!==e.size)return!1;var i,n=r(t);try{for(n.s();!(i=n.n()).done;){var s=i.value;if(!e.has(s))return!1}}catch(a){n.e(a)}finally{n.f()}return!0}},{key:"isSupersetOf",value:function(t,e){var i,n=r(e);try{for(n.s();!(i=n.n()).done;){var s=i.value;if(!t.has(s))return!1}}catch(a){n.e(a)}finally{n.f()}return!0}}]),t}();t.exports=h},3465:function(t,e,i){var r=i(1589).default,n=i(6690).default,s=i(9728).default,a=(i(5879),i(9128)),o=i(2992),h=i(4310),l=i(7849),u=i(3907),g=i(2181),c=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.drawer=new h(e),this.reactionDrawer=new l(i,JSON.parse(JSON.stringify(this.drawer.opts)))}return s(t,[{key:"apply",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-smiles",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"light";document.querySelectorAll("[".concat(i,"]")).forEach((function(n){var s=n.getAttribute(i),a=r;if(n.hasAttribute("data-smiles-theme")&&(a=n.getAttribute("data-smiles-theme")),n.hasAttribute("data-smiles-options")||n.hasAttribute("data-smiles-reaction-options")){var o={};n.hasAttribute("data-smiles-options")&&(o=JSON.parse(n.getAttribute("data-smiles-options").replaceAll("'",'"')));var h={};n.hasAttribute("data-smiles-reaction-options")&&(h=JSON.parse(n.getAttribute("data-smiles-reaction-options").replaceAll("'",'"'))),new t(o,h).draw(s,n,a,null,null)}else e.draw(s,n,a,null,null)}))}},{key:"draw",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=t.split(" "),o=r(a);t=o[0];var h=o.slice(1).join(" "),l={};if(h.includes("__")){var u=h.substring(h.indexOf("__")+2,h.lastIndexOf("__"));l=JSON.parse(u.replaceAll("'",'"'))}if(l=g.extend(!0,{textAboveArrow:"{reagents}",textBelowArrow:""},l),t.includes(">"))try{this.drawReaction(t,e,i,l,n)}catch(c){s?s(c):console.error(c)}else try{this.drawMolecule(t,e,i,n)}catch(c){s?s(c):console.error(c)}}},{key:"drawMolecule",value:function(t,e,i,r){var n=this,s=a.parse(t);if(null===e||"svg"===e){var o=this.drawer.draw(s,null,i),h=this.getDimensions(o);o.setAttributeNS(null,"width",""+h.w),o.setAttributeNS(null,"height",""+h.h),r&&r(o)}else if("canvas"===e){var l=this.svgToCanvas(this.drawer.draw(s,null,i));r&&r(l)}else if("img"===e){var u=this.svgToImg(this.drawer.draw(s,null,i));r&&r(u)}else if(e instanceof HTMLImageElement)this.svgToImg(this.drawer.draw(s,null,i),e),r&&r(e);else if(e instanceof SVGElement)this.drawer.draw(s,e,i),r&&r(e);else{document.querySelectorAll(e).forEach((function(t){var e=t.nodeName.toLowerCase();"svg"===e?(n.drawer.draw(s,t,i),r&&r(t)):"canvas"===e?(n.svgToCanvas(n.drawer.draw(s,null,i),t),r&&r(t)):"img"===e&&(n.svgToImg(n.drawer.draw(s,null,i),t),r&&r(t))}))}}},{key:"drawReaction",value:function(t,e,i,r,n){var s=this,a=o.parse(t);if(null===e||"svg"===e){var h=this.reactionDrawer.draw(a,null,i),l=this.getDimensions(h);h.setAttributeNS(null,"width",""+l.w),h.setAttributeNS(null,"height",""+l.h),n&&n(h)}else if("canvas"===e){var u=this.svgToCanvas(this.reactionDrawer.draw(a,null,i,r.textAboveArrow,r.textBelowArrow));n&&n(u)}else if("img"===e){var g=this.svgToImg(this.reactionDrawer.draw(a,null,i,r.textAboveArrow,r.textBelowArrow));n&&n(g)}else if(e instanceof HTMLImageElement)this.svgToImg(this.reactionDrawer.draw(a,null,i,r.textAboveArrow,r.textBelowArrow),e),n&&n(e);else if(e instanceof SVGElement)this.reactionDrawer.draw(a,e,i,r.textAboveArrow,r.textBelowArrow),n&&n(e);else{document.querySelectorAll(e).forEach((function(t){var e=t.nodeName.toLowerCase();"svg"===e?(s.reactionDrawer.draw(a,t,i,r.textAboveArrow,r.textBelowArrow),s.reactionDrawer.opts.scale<=0&&(t.style.width=null,t.style.height=null),n&&n(t)):"canvas"===e?(s.svgToCanvas(s.reactionDrawer.draw(a,null,i,r.textAboveArrow,r.textBelowArrow),t),n&&n(t)):"img"===e&&(s.svgToImg(s.reactionDrawer.draw(a,null,i,r.textAboveArrow,r.textBelowArrow),t),n&&n(t))}))}}},{key:"svgToCanvas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===e&&(e=document.createElement("canvas"));var i=this.getDimensions(e,t);return u.svgToCanvas(t,e,i.w,i.h),e}},{key:"svgToImg",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===e&&(e=document.createElement("img"));var i=this.getDimensions(e,t);return u.svgToImg(t,e,i.w,i.h),e}},{key:"getDimensions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.drawer.opts.width,r=this.drawer.opts.height;return this.drawer.opts.scale<=0?(null===i&&(i=t.width),null===r&&(r=t.height),""!==t.style.width&&(i=parseInt(t.style.width)),""!==t.style.height&&(r=parseInt(t.style.height))):e&&(i=parseFloat(e.style.width),r=parseFloat(e.style.height)),{w:i,h:r}}}],[{key:"apply",value:function(){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data-smiles",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"light",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).apply(e,i,r,n)}}]),t}();t.exports=c},4310:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=i(9521),a=i(8666),o=i(3214),h=(i(5901),i(1423)),l=i(3907),u=i(496),g=i(8357),c=function(){"use strict";function t(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r(this,t),this.preprocessor=new o(e),this.opts=this.preprocessor.opts,this.clear=i,this.svgWrapper=null}return n(t,[{key:"draw",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];null===e||"svg"===e?((e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttributeNS(null,"width",this.opts.width),e.setAttributeNS(null,"height",this.opts.height)):e instanceof String&&(e=document.getElementById(e));var s=this.preprocessor;return s.initDraw(t,i,r,n),r||(this.themeManager=new u(this.opts.themes,i),(null===this.svgWrapper||this.clear)&&(this.svgWrapper=new l(this.themeManager,e,this.opts,this.clear))),s.processGraph(),this.svgWrapper.determineDimensions(s.graph.vertices),this.drawAtomHighlights(s.opts.debug),this.drawEdges(s.opts.debug),this.drawVertices(s.opts.debug),s.opts.debug&&(console.log(s.graph),console.log(s.rings),console.log(s.ringConnections)),this.svgWrapper.constructSvg(),e}},{key:"drawCanvas",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=null;n="string"===typeof e||e instanceof String?document.getElementById(e):e;var s=document.createElementNS("http://www.w3.org/2000/svg","svg");return s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttributeNS(null,"viewBox","0 0 500 500"),s.setAttributeNS(null,"width","500"),s.setAttributeNS(null,"height","500"),s.setAttributeNS(null,"style","visibility: hidden: position: absolute; left: -1000px"),document.body.appendChild(s),this.svgDrawer.draw(t,s,i,r),this.svgDrawer.svgWrapper.toCanvas(n,this.svgDrawer.opts.width,this.svgDrawer.opts.height),document.body.removeChild(s),e}},{key:"drawAromaticityRing",value:function(t){this.svgWrapper.drawRing(t.center.x,t.center.y,t.getSize())}},{key:"drawEdges",value:function(t){var e=this,i=this.preprocessor,r=i.graph,n=i.rings,s=Array(this.preprocessor.graph.edges.length);if(s.fill(!1),r.traverseBF(0,(function(i){for(var n=r.getEdges(i.id),a=0;a<n.length;a++){var o=n[a];s[o]||(s[o]=!0,e.drawEdge(o,t))}})),!this.bridgedRing)for(var a=0;a<n.length;a++){var o=n[a];i.isRingAromatic(o)&&this.drawAromaticityRing(o)}}},{key:"drawEdge",value:function(t,e){var i=this.preprocessor,r=i.opts,n=this.svgWrapper,a=i.graph.edges[t],o=i.graph.vertices[a.sourceId],l=i.graph.vertices[a.targetId],u=o.value.element,c=l.value.element;if(o.value.isDrawn&&l.value.isDrawn||"default"!==i.opts.atomVisualization){var d=o.position,v=l.position,f=i.getEdgeNormals(a),p=s.clone(f);if(p[0].multiplyScalar(10).add(d),p[1].multiplyScalar(10).add(d),"="===a.bondType||"="===i.getRingbondType(o,l)||a.isPartOfAromaticRing&&i.bridgedRing){var m=i.areVerticesInSameRing(o,l),y=i.chooseSide(o,l,p);if(m){var b=i.getLargestOrAromaticCommonRing(o,l).center;f[0].multiplyScalar(r.bondSpacing),f[1].multiplyScalar(r.bondSpacing);var w=null;(w=b.sameSideAs(o.position,l.position,g.add(d,f[0]))?new h(g.add(d,f[0]),g.add(v,f[0]),u,c):new h(g.add(d,f[1]),g.add(v,f[1]),u,c)).shorten(r.bondLength-r.shortBondLength*r.bondLength),a.isPartOfAromaticRing?n.drawLine(w,!0):n.drawLine(w),n.drawLine(new h(d,v,u,c))}else if(a.center||o.isTerminal()&&l.isTerminal()||0==y.anCount&&y.bnCount>1||0==y.bnCount&&y.anCount>1){this.multiplyNormals(f,r.halfBondSpacing);var S=new h(g.add(d,f[0]),g.add(v,f[0]),u,c),x=new h(g.add(d,f[1]),g.add(v,f[1]),u,c);n.drawLine(S),n.drawLine(x)}else if(y.sideCount[0]>y.sideCount[1]||y.totalSideCount[0]>y.totalSideCount[1]){this.multiplyNormals(f,r.bondSpacing);var A=new h(g.add(d,f[0]),g.add(v,f[0]),u,c);A.shorten(r.bondLength-r.shortBondLength*r.bondLength),n.drawLine(A),n.drawLine(new h(d,v,u,c))}else if(y.sideCount[0]<y.sideCount[1]||y.totalSideCount[0]<=y.totalSideCount[1]){this.multiplyNormals(f,r.bondSpacing);var C=new h(g.add(d,f[1]),g.add(v,f[1]),u,c);C.shorten(r.bondLength-r.shortBondLength*r.bondLength),n.drawLine(C),n.drawLine(new h(d,v,u,c))}}else if("#"===a.bondType){f[0].multiplyScalar(r.bondSpacing/1.5),f[1].multiplyScalar(r.bondSpacing/1.5);var k=new h(g.add(d,f[0]),g.add(v,f[0]),u,c),N=new h(g.add(d,f[1]),g.add(v,f[1]),u,c);n.drawLine(k),n.drawLine(N),n.drawLine(new h(d,v,u,c))}else if("."===a.bondType);else{var R=o.value.isStereoCenter,T=l.value.isStereoCenter;"up"===a.wedge?n.drawWedge(new h(d,v,u,c,R,T)):"down"===a.wedge?n.drawDashedWedge(new h(d,v,u,c,R,T)):n.drawLine(new h(d,v,u,c,R,T))}if(e){var B=g.midpoint(d,v);n.drawDebugText(B.x,B.y,"e: "+t)}}}},{key:"drawAtomHighlights",value:function(t){for(var e=this.preprocessor,i=(e.opts,e.graph),r=(e.rings,this.svgWrapper),n=0;n<i.vertices.length;n++)for(var s=i.vertices[n],a=s.value,o=0;o<e.highlight_atoms.length;o++){var h=e.highlight_atoms[o];a.class===h[0]&&r.drawAtomHighlight(s.position.x,s.position.y,h[1])}}},{key:"drawVertices",value:function(t){var e=this.preprocessor,i=e.opts,r=e.graph,n=e.rings,o=this.svgWrapper,h=r.vertices.length;for(h=0;h<r.vertices.length;h++){var l=r.vertices[h],u=l.value,c=0,d=0,v=l.value.bondCount,f=u.element,p=a.maxBonds[f]-v,m=l.getTextDirection(r.vertices),y=!(!i.terminalCarbons&&"C"===f&&!u.hasAttachedPseudoElements)&&l.isTerminal(),b="C"===u.element;if("N"===u.element&&u.isPartOfAromaticRing&&(p=0),u.bracket&&(p=u.bracket.hcount,c=u.bracket.charge,d=u.bracket.isotope),"allballs"===i.atomVisualization)o.drawBall(l.position.x,l.position.y,f);else if(u.isDrawn&&(!b||u.drawExplicit||y||u.hasAttachedPseudoElements)||1===r.vertices.length)if("default"===i.atomVisualization){var w=u.getAttachedPseudoElements();u.hasAttachedPseudoElements&&r.vertices.length===Object.keys(w).length+1&&(m="right"),o.drawText(l.position.x,l.position.y,f,p,m,y,c,d,r.vertices.length,w)}else"balls"===i.atomVisualization&&o.drawBall(l.position.x,l.position.y,f);else if(2===l.getNeighbourCount()&&1==l.forcePositioned){var S=r.vertices[l.neighbours[0]].position,x=r.vertices[l.neighbours[1]].position,A=g.threePointangle(l.position,S,x);Math.abs(Math.PI-A)<.1&&o.drawPoint(l.position.x,l.position.y,f)}if(t){var C="v: "+l.id+" "+s.print(u.ringbonds);o.drawDebugText(l.position.x,l.position.y,C)}}if(i.debug)for(h=0;h<n.length;h++){var k=n[h].center;o.drawDebugPoint(k.x,k.y,"r: "+n[h].id)}}},{key:"getTotalOverlapScore",value:function(){return this.preprocessor.getTotalOverlapScore()}},{key:"getMolecularFormula",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.preprocessor.getMolecularFormula(t)}},{key:"multiplyNormals",value:function(t,e){t[0].multiplyScalar(e),t[1].multiplyScalar(e)}}]),t}();t.exports=c},3907:function(t,e,i){var r=i(7424).default,n=i(4704).default,s=i(6690).default,a=i(9728).default,o=(i(2914).getChargeText,i(1423)),h=i(8357),l=i(5013);var u=function(){"use strict";function t(e,i,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(s(this,t),this.svg="string"===typeof i||i instanceof String?document.getElementById(i):i,this.container=null,this.opts=r,this.uid=function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)e+=i.charAt(Math.floor(62*Math.random()));return e}(5),this.gradientId=0,this.paths=[],this.vertices=[],this.gradients=[],this.highlights=[],this.drawingWidth=0,this.drawingHeight=0,this.halfBondThickness=this.opts.bondThickness/2,this.themeManager=e,this.maskElements=[],this.maxX=-Number.MAX_VALUE,this.maxY=-Number.MAX_VALUE,this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,n)for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);this.style=document.createElementNS("http://www.w3.org/2000/svg","style"),this.style.appendChild(document.createTextNode("\n                .element {\n                    font: ".concat(this.opts.fontSizeLarge,"pt ").concat(this.opts.fontFamily,";\n                }\n                .sub {\n                    font: ").concat(this.opts.fontSizeSmall,"pt ").concat(this.opts.fontFamily,";\n                }\n            "))),this.svg?this.svg.appendChild(this.style):(this.container=document.createElementNS("http://www.w3.org/2000/svg","g"),container.appendChild(this.style))}return a(t,[{key:"constructSvg",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","defs"),e=document.createElementNS("http://www.w3.org/2000/svg","mask"),i=document.createElementNS("http://www.w3.org/2000/svg","g"),r=document.createElementNS("http://www.w3.org/2000/svg","g"),s=document.createElementNS("http://www.w3.org/2000/svg","g"),a=this.paths,o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttributeNS(null,"x",this.minX),o.setAttributeNS(null,"y",this.minY),o.setAttributeNS(null,"width",this.maxX-this.minX),o.setAttributeNS(null,"height",this.maxY-this.minY),o.setAttributeNS(null,"fill","white"),e.appendChild(o),e.setAttributeNS(null,"id",this.uid+"-text-mask");var h,l=n(a);try{for(l.s();!(h=l.n()).done;){var u=h.value;r.appendChild(u)}}catch(A){l.e(A)}finally{l.f()}var g,c=n(this.highlights);try{for(c.s();!(g=c.n()).done;){var d=g.value;i.appendChild(d)}}catch(A){c.e(A)}finally{c.f()}var v,f=n(this.vertices);try{for(f.s();!(v=f.n()).done;){var p=v.value;s.appendChild(p)}}catch(A){f.e(A)}finally{f.f()}var m,y=n(this.maskElements);try{for(y.s();!(m=y.n()).done;){var b=m.value;e.appendChild(b)}}catch(A){y.e(A)}finally{y.f()}var w,S=n(this.gradients);try{for(S.s();!(w=S.n()).done;){var x=w.value;t.appendChild(x)}}catch(A){S.e(A)}finally{S.f()}if(r.setAttributeNS(null,"mask","url(#"+this.uid+"-text-mask)"),this.updateViewbox(this.opts.scale),!this.svg)return this.container.appendChild(t),this.container.appendChild(e),this.container.appendChild(r),this.container.appendChild(s),this.container;this.svg.appendChild(t),this.svg.appendChild(e),this.svg.appendChild(i),this.svg.appendChild(r),this.svg.appendChild(s)}},{key:"createGradient",value:function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),i=this.uid+"-line-".concat(this.gradientId++),r=t.getLeftVector(),n=t.getRightVector(),s=r.x,a=r.y,o=n.x,h=n.y;e.setAttributeNS(null,"id",i),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"x1",s),e.setAttributeNS(null,"y1",a),e.setAttributeNS(null,"x2",o),e.setAttributeNS(null,"y2",h);var l=document.createElementNS("http://www.w3.org/2000/svg","stop");l.setAttributeNS(null,"stop-color",this.themeManager.getColor(t.getLeftElement())||this.themeManager.getColor("C")),l.setAttributeNS(null,"offset","20%");var u=document.createElementNS("http://www.w3.org/2000/svg","stop");return u.setAttributeNS(null,"stop-color",this.themeManager.getColor(t.getRightElement()||this.themeManager.getColor("C"))),u.setAttributeNS(null,"offset","100%"),e.appendChild(l),e.appendChild(u),this.gradients.push(e),i}},{key:"createSubSuperScripts",value:function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","tspan");return i.setAttributeNS(null,"baseline-shift",e),i.appendChild(document.createTextNode(t)),i.setAttributeNS(null,"class","sub"),i}},{key:"determineDimensions",value:function(t){for(var e=0;e<t.length;e++)if(t[e].value.isDrawn){var i=t[e].position;this.maxX<i.x&&(this.maxX=i.x),this.maxY<i.y&&(this.maxY=i.y),this.minX>i.x&&(this.minX=i.x),this.minY>i.y&&(this.minY=i.y)}var r=this.opts.padding;this.maxX+=r,this.maxY+=r,this.minX-=r,this.minY-=r,this.drawingWidth=this.maxX-this.minX,this.drawingHeight=this.maxY-this.minY}},{key:"updateViewbox",value:function(t){var e=this.minX,i=this.minY,r=this.maxX-this.minX,n=this.maxY-this.minY;if(t<=0)if(r>n){var s=r-n;n=r,i-=s/2}else{var a=n-r;r=n,e-=a/2}else this.svg&&(this.svg.style.width=t*r+"px",this.svg.style.height=t*n+"px");this.svg.setAttributeNS(null,"viewBox","".concat(e," ").concat(i," ").concat(r," ").concat(n))}},{key:"drawBall",value:function(t,e,i){var r=this.opts.bondLength/4.5;t-r<this.minX&&(this.minX=t-r),t+r>this.maxX&&(this.maxX=t+r),e-r<this.minY&&(this.minY=e-r),e+r>this.maxY&&(this.maxY=e+r);var n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",e),n.setAttributeNS(null,"r",r),n.setAttributeNS(null,"fill",this.themeManager.getColor(i)),this.vertices.push(n)}},{key:"drawWedge",value:function(t){var e=t.getLeftVector().clone(),i=t.getRightVector().clone(),r=h.normals(e,i);r[0].normalize(),r[1].normalize();var n=e,s=i;t.getRightChiral()&&(n=i,s=e);var a=h.add(n,h.multiplyScalar(r[0],this.halfBondThickness)),o=h.add(s,h.multiplyScalar(r[0],3+this.opts.fontSizeLarge/4)),l=h.add(s,h.multiplyScalar(r[1],3+this.opts.fontSizeLarge/4)),u=h.add(n,h.multiplyScalar(r[1],this.halfBondThickness)),g=document.createElementNS("http://www.w3.org/2000/svg","polygon"),c=this.createGradient(t,e.x,e.y,i.x,i.y);g.setAttributeNS(null,"points","".concat(a.x,",").concat(a.y," ").concat(o.x,",").concat(o.y," ").concat(l.x,",").concat(l.y," ").concat(u.x,",").concat(u.y)),g.setAttributeNS(null,"fill","url('#".concat(c,"')")),this.paths.push(g)}},{key:"drawAtomHighlight",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#03fc9d",r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttributeNS(null,"cx",t),r.setAttributeNS(null,"cy",e),r.setAttributeNS(null,"r",this.opts.bondLength/3),r.setAttributeNS(null,"fill",i),this.highlights.push(r)}},{key:"drawDashedWedge",value:function(t){if(!(isNaN(t.from.x)||isNaN(t.from.y)||isNaN(t.to.x)||isNaN(t.to.y))){var e,i,r=t.getLeftVector().clone(),n=t.getRightVector().clone(),s=h.normals(r,n);s[0].normalize(),s[1].normalize(),t.getRightChiral()?(e=n,i=r):(e=r,i=n);for(var a=h.subtract(i,e).normalize(),l=t.getLength(),u=1.25/(l/(this.opts.bondLength/10)),g=this.createGradient(t),c=0;c<1;c+=u){var d=h.multiplyScalar(a,c*l),v=h.add(e,d),f=this.opts.fontSizeLarge/2*c,p=h.multiplyScalar(s[0],f);v.subtract(p);var m=v.clone();m.add(h.multiplyScalar(p,2)),this.drawLine(new o(v,m),null,g)}}}},{key:"drawDebugPoint",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttributeNS(null,"cx",t),r.setAttributeNS(null,"cy",e),r.setAttributeNS(null,"r","2"),r.setAttributeNS(null,"fill","#f00"),this.vertices.push(r),this.drawDebugText(t,e,i)}},{key:"drawDebugText",value:function(t,e,i){var r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttributeNS(null,"x",t),r.setAttributeNS(null,"y",e),r.setAttributeNS(null,"class","debug"),r.setAttributeNS(null,"fill","#ff0000"),r.setAttributeNS(null,"style","\n                font: 5px Droid Sans, sans-serif;\n            "),r.appendChild(document.createTextNode(i)),this.vertices.push(r)}},{key:"drawRing",value:function(t,e,i){var r=document.createElementNS("http://www.w3.org/2000/svg","circle"),n=l.apothemFromSideLength(this.opts.bondLength,i);r.setAttributeNS(null,"cx",t),r.setAttributeNS(null,"cy",e),r.setAttributeNS(null,"r",n-this.opts.bondSpacing),r.setAttributeNS(null,"stroke",this.themeManager.getColor("C")),r.setAttributeNS(null,"stroke-width",this.opts.bondThickness),r.setAttributeNS(null,"fill","none"),this.paths.push(r)}},{key:"drawLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"round",n=(this.opts,[["stroke-width",this.opts.bondThickness],["stroke-linecap",r],["stroke-dasharray",e?"5, 5":"none"]]),s=t.getLeftVector(),a=t.getRightVector(),o=s.x,h=s.y,l=a.x,u=a.y,g=n.map((function(t){return t.join(":")})).join(";"),c=document.createElementNS("http://www.w3.org/2000/svg","line");c.setAttributeNS(null,"x1",o),c.setAttributeNS(null,"y1",h),c.setAttributeNS(null,"x2",l),c.setAttributeNS(null,"y2",u),c.setAttributeNS(null,"style",g),this.paths.push(c),null==i&&(i=this.createGradient(t,o,h,l,u)),c.setAttributeNS(null,"stroke","url('#".concat(i,"')"))}},{key:"drawPoint",value:function(t,e,i){var r=.75;t-r<this.minX&&(this.minX=t-r),t+r>this.maxX&&(this.maxX=t+r),e-r<this.minY&&(this.minY=e-r),e+r>this.maxY&&(this.maxY=e+r);var n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",e),n.setAttributeNS(null,"r","1.5"),n.setAttributeNS(null,"fill","black"),this.maskElements.push(n);var s=document.createElementNS("http://www.w3.org/2000/svg","circle");s.setAttributeNS(null,"cx",t),s.setAttributeNS(null,"cy",e),s.setAttributeNS(null,"r",r),s.setAttributeNS(null,"fill",this.themeManager.getColor(i)),this.vertices.push(s)}},{key:"drawText",value:function(e,i,r,n,s,a,o,h,l){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},g=[],c=r;for(var d in 0!==o&&null!==o&&(c+=t.createUnicodeCharge(o)),0!==h&&null!==h&&(c=t.createUnicodeSuperscript(h)+c),g.push([c,r]),1===n?g.push(["H","H"]):n>1&&g.push(["H"+t.createUnicodeSubscript(n),"H"]),1===o&&"N"===r&&u.hasOwnProperty("0O")&&u.hasOwnProperty("0O-1")&&(u={"0O":{element:"O",count:2,hydrogenCount:0,previousElement:"C",charge:""}},o=0),u)if(u.hasOwnProperty(d)){var v=u[d],f=v.element;v.count>1&&(f+=t.createUnicodeSubscript(v.count)),""!==v.charge&&(f+=t.createUnicodeCharge(o)),g.push([f,v.element]),1===v.hydrogenCount?g.push(["H","H"]):v.hydrogenCount>1&&g.push(["H"+t.createUnicodeSubscript(v.hydrogenCount),"H"])}this.write(g,s,e,i,1===l)}},{key:"write",value:function(e,i,r,n,s){var a=this,o=t.measureText(e[0][1],this.opts.fontSizeLarge,this.opts.fontFamily);"left"===i&&e[0][0]!==e[0][1]&&(o.width*=2),s?(r+o.width*e.length>this.maxX&&(this.maxX=r+o.width*e.length),r-o.width/2<this.minX&&(this.minX=r-o.width/2),n-o.height<this.minY&&(this.minY=n-o.height),n+o.height>this.maxY&&(this.maxY=n+o.height)):("right"!==i?(r+o.width*e.length>this.maxX&&(this.maxX=r+o.width*e.length),r-o.width*e.length<this.minX&&(this.minX=r-o.width*e.length)):"left"!==i&&(r+o.width*e.length>this.maxX&&(this.maxX=r+o.width*e.length),r-o.width/2<this.minX&&(this.minX=r-o.width/2)),n-o.height<this.minY&&(this.minY=n-o.height),n+o.height>this.maxY&&(this.maxY=n+o.height),"down"===i&&n+.8*o.height*e.length>this.maxY&&(this.maxY=n+.8*o.height*e.length),"up"===i&&n-.8*o.height*e.length<this.minY&&(this.minY=n-.8*o.height*e.length));var h=r,l=n,u=document.createElementNS("http://www.w3.org/2000/svg","text");u.setAttributeNS(null,"class","element");var g=document.createElementNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill","#ffffff"),"left"===i&&(e=e.reverse()),"right"!==i&&"down"!==i&&"up"!==i||(r-=o.width/2),"left"===i&&(r+=o.width/2),e.forEach((function(t,e){var r=t[0],n=t[1],s=document.createElementNS("http://www.w3.org/2000/svg","tspan");s.setAttributeNS(null,"fill",a.themeManager.getColor(n)),s.textContent=r,"up"!==i&&"down"!==i||(s.setAttributeNS(null,"x","0px"),"up"===i?s.setAttributeNS(null,"y","-".concat(.9*e,"em")):s.setAttributeNS(null,"y","".concat(.9*e,"em"))),u.appendChild(s)})),u.setAttributeNS(null,"data-direction",i),"left"===i||"right"===i?(u.setAttributeNS(null,"dominant-baseline","alphabetic"),u.setAttributeNS(null,"y","0.36em")):u.setAttributeNS(null,"dominant-baseline","central"),"left"===i&&u.setAttributeNS(null,"text-anchor","end"),g.appendChild(u),g.setAttributeNS(null,"style","transform: translateX(".concat(r,"px) translateY(").concat(n,"px)"));var c=.75*this.opts.fontSizeLarge;e[0][1].length>1&&(c=1.1*this.opts.fontSizeLarge);var d=document.createElementNS("http://www.w3.org/2000/svg","circle");d.setAttributeNS(null,"cx",h),d.setAttributeNS(null,"cy",l),d.setAttributeNS(null,"r",c),d.setAttributeNS(null,"fill","black"),this.maskElements.push(d),this.vertices.push(g)}},{key:"toCanvas",value:function(t,e,i){("string"===typeof t||t instanceof String)&&(t=document.getElementById(t));var r=new Image;r.onload=function(){t.width=e,t.height=i,t.getContext("2d").drawImage(r,0,0,e,i)},r.src="data:image/svg+xml;charset-utf-8,"+encodeURIComponent(this.svg.outerHTML)}}],[{key:"createUnicodeCharge",value:function(e){return 1===e?"\u207a":-1===e?"\u207b":e>1?t.createUnicodeSuperscript(e)+"\u207a":e<-1?t.createUnicodeSuperscript(e)+"\u207b":""}},{key:"createUnicodeSubscript",value:function(t){var e="";return t.toString().split("").forEach((function(t){e+=["\u2080","\u2081","\u2082","\u2083","\u2084","\u2085","\u2086","\u2087","\u2088","\u2089"][parseInt(t)]})),e}},{key:"createUnicodeSuperscript",value:function(t){var e="";return t.toString().split("").forEach((function(t){e+=["\u2070","\xb9","\xb2","\xb3","\u2074","\u2075","\u2076","\u2077","\u2078","\u2079"][parseInt(t)]})),e}},{key:"replaceNumbersWithSubscript",value:function(t){for(var e=0,i=Object.entries({0:"\u2080",1:"\u2081",2:"\u2082",3:"\u2083",4:"\u2084",5:"\u2085",6:"\u2086",7:"\u2087",8:"\u2088",9:"\u2089"});e<i.length;e++){var n=r(i[e],2),s=n[0],a=n[1];t=t.replaceAll(s,a)}return t}},{key:"measureText",value:function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.9,n=document.createElement("canvas").getContext("2d");n.font="".concat(e,"pt ").concat(i);var s=n.measureText(t),a=Math.abs(s.actualBoundingBoxLeft)+Math.abs(s.actualBoundingBoxRight);return{width:s.width>a?s.width:a,height:(Math.abs(s.actualBoundingBoxAscent)+Math.abs(s.actualBoundingBoxAscent))*r}}},{key:"svgToCanvas",value:function(t,e,i,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;t.setAttributeNS(null,"width",i),t.setAttributeNS(null,"height",r);var s=new Image;return s.onload=function(){e.width=i,e.height=r;var t=e.getContext("2d");t.imageSmoothingEnabled=!1,t.drawImage(s,0,0,i,r),n&&n(e)},s.onerror=function(t){console.log(t)},s.src="data:image/svg+xml;charset-utf-8,"+encodeURIComponent(t.outerHTML),e}},{key:"svgToImg",value:function(t,e,i,r){var n=document.createElement("canvas");this.svgToCanvas(t,n,i,r,(function(t){e.src=n.toDataURL("image/png")}))}},{key:"writeText",value:function(e,i,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.MAX_SAFE_INTEGER,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","style");o.appendChild(document.createTextNode("\n        .text {\n            font: ".concat(r,"pt ").concat(n,";\n            dominant-baseline: ideographic;\n        }\n    "))),a.appendChild(o);var h=document.createElementNS("http://www.w3.org/2000/svg","text");h.setAttributeNS(null,"class","text");var l=0,u=0,g=[];return e.split("\n").forEach((function(e){var i=t.measureText(e,r,n,1);if(i.width>=s){for(var a=0,o=0,h=e.split(" "),l=0,u=0;u<h.length;u++){var c=t.measureText(h[u],r,n,1);a+c.width>s&&(g.push({text:h.slice(l,u).join(" "),width:a,height:o}),a=0,o=0,l=u),c.height>o&&(o=c.height),a+=c.width}l<h.length&&g.push({text:h.slice(l,h.length).join(" "),width:a,height:o})}else g.push({text:e,width:i.width,height:i.height})})),g.forEach((function(t,e){u+=t.height;var r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS(null,"fill",i.getColor("C")),r.textContent=t.text,r.setAttributeNS(null,"x","0px"),r.setAttributeNS(null,"y","".concat(u,"px")),h.appendChild(r),t.width>l&&(l=t.width)})),a.appendChild(h),{svg:a,width:l,height:u}}}]),t}();t.exports=u},496:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=function(){"use strict";function t(e,i){r(this,t),this.colors=e,this.theme=this.colors[i]}return n(t,[{key:"getColor",value:function(t){return t&&(t=t.toUpperCase())in this.theme?this.theme[t]:this.theme.C}},{key:"setTheme",value:function(t){this.colors.hasOwnProperty(t)&&(this.theme=this.colors[t])}}]),t}();t.exports=s},2914:function(t){t.exports={getChargeText:function(t){return 1===t?"+":2===t?"2+":-1===t?"-":-2===t?"2-":""}}},8357:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=function(){"use strict";function t(e,i){r(this,t),0==arguments.length?(this.x=0,this.y=0):1==arguments.length?(this.x=e.x,this.y=e.y):(this.x=e,this.y=i)}return n(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"toString",value:function(){return"("+this.x+","+this.y+")"}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"subtract",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"divide",value:function(t){return this.x/=t,this.y/=t,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"invert",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"distance",value:function(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))}},{key:"distanceSq",value:function(t){return(t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y)}},{key:"clockwise",value:function(t){var e=this.y*t.x,i=this.x*t.y;return e>i?-1:e===i?0:1}},{key:"relativeClockwise",value:function(t,e){var i=(this.y-t.y)*(e.x-t.x),r=(this.x-t.x)*(e.y-t.y);return i>r?-1:i===r?0:1}},{key:"rotate",value:function(e){var i=new t(0,0),r=Math.cos(e),n=Math.sin(e);return i.x=this.x*r-this.y*n,i.y=this.x*n+this.y*r,this.x=i.x,this.y=i.y,this}},{key:"rotateAround",value:function(t,e){var i=Math.sin(t),r=Math.cos(t);this.x-=e.x,this.y-=e.y;var n=this.x*r-this.y*i,s=this.x*i+this.y*r;return this.x=n+e.x,this.y=s+e.y,this}},{key:"rotateTo",value:function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x+=.001,this.y-=.001;var n=t.subtract(this,i),s=t.subtract(e,i),a=t.angle(s,n);return this.rotateAround(a+r,i),this}},{key:"rotateAwayFrom",value:function(t,e,i){this.rotateAround(i,e);var r=this.distanceSq(t);this.rotateAround(-2*i,e),this.distanceSq(t)<r&&this.rotateAround(2*i,e)}},{key:"getRotateAwayFromAngle",value:function(t,e,i){var r=this.clone();r.rotateAround(i,e);var n=r.distanceSq(t);return r.rotateAround(-2*i,e),r.distanceSq(t)<n?i:-i}},{key:"getRotateTowardsAngle",value:function(t,e,i){var r=this.clone();r.rotateAround(i,e);var n=r.distanceSq(t);return r.rotateAround(-2*i,e),r.distanceSq(t)>n?i:-i}},{key:"getRotateToAngle",value:function(e,i){var r=t.subtract(this,i),n=t.subtract(e,i),s=t.angle(n,r);return Number.isNaN(s)?0:s}},{key:"isInPolygon",value:function(t){for(var e=!1,i=0,r=t.length-1;i<t.length;r=i++)t[i].y>this.y!=t[r].y>this.y&&this.x<(t[r].x-t[i].x)*(this.y-t[i].y)/(t[r].y-t[i].y)+t[i].x&&(e=!e);return e}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){return this.divide(this.length()),this}},{key:"normalized",value:function(){return t.divideScalar(this,this.length())}},{key:"whichSide",value:function(t,e){return(this.x-t.x)*(e.y-t.y)-(this.y-t.y)*(e.x-t.x)}},{key:"sameSideAs",value:function(t,e,i){var r=this.whichSide(t,e),n=i.whichSide(t,e);return r<0&&n<0||0==r&&0==n||r>0&&n>0}}],[{key:"add",value:function(e,i){return new t(e.x+i.x,e.y+i.y)}},{key:"subtract",value:function(e,i){return new t(e.x-i.x,e.y-i.y)}},{key:"multiply",value:function(e,i){return new t(e.x*i.x,e.y*i.y)}},{key:"multiplyScalar",value:function(e,i){return new t(e.x,e.y).multiplyScalar(i)}},{key:"midpoint",value:function(e,i){return new t((e.x+i.x)/2,(e.y+i.y)/2)}},{key:"normals",value:function(e,i){var r=t.subtract(i,e);return[new t(-r.y,r.x),new t(r.y,-r.x)]}},{key:"units",value:function(e,i){var r=t.subtract(i,e);return[new t(-r.y,r.x).normalize(),new t(r.y,-r.x).normalize()]}},{key:"divide",value:function(e,i){return new t(e.x/i.x,e.y/i.y)}},{key:"divideScalar",value:function(e,i){return new t(e.x/i,e.y/i)}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"angle",value:function(e,i){var r=t.dot(e,i);return Math.acos(r/(e.length()*i.length()))}},{key:"threePointangle",value:function(e,i,r){var n=t.subtract(i,e),s=t.subtract(r,i),a=e.distance(i),o=i.distance(r);return Math.acos(t.dot(n,s)/(a*o))}},{key:"scalarProjection",value:function(e,i){var r=i.normalized();return t.dot(e,r)}},{key:"averageDirection",value:function(e){for(var i=new t(0,0),r=0;r<e.length;r++){var n=e[r];i.add(n)}return i.normalize()}}]),t}();t.exports=s},1965:function(t,e,i){var r=i(6690).default,n=i(9728).default,s=i(5013),a=i(9521),o=i(8357),h=(i(8666),function(){"use strict";function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),this.id=null,this.value=e,this.position=new o(i||0,n||0),this.previousPosition=new o(0,0),this.parentVertexId=null,this.children=Array(),this.spanningTreeChildren=Array(),this.edges=Array(),this.positioned=!1,this.angle=null,this.dir=1,this.neighbourCount=0,this.neighbours=Array(),this.neighbouringElements=Array(),this.forcePositioned=!1}return n(t,[{key:"setPosition",value:function(t,e){this.position.x=t,this.position.y=e}},{key:"setPositionFromVector",value:function(t){this.position.x=t.x,this.position.y=t.y}},{key:"addChild",value:function(t){this.children.push(t),this.neighbours.push(t),this.neighbourCount++}},{key:"addRingbondChild",value:function(t,e){if(this.children.push(t),this.value.bracket){var i=1;0===this.id&&0===this.value.bracket.hcount&&(i=0),1===this.value.bracket.hcount&&0===e&&(i=2),1===this.value.bracket.hcount&&1===e&&(i=this.neighbours.length<3?2:3),null===this.value.bracket.hcount&&0===e&&(i=1),null===this.value.bracket.hcount&&1===e&&(i=this.neighbours.length<3?1:2),this.neighbours.splice(i,0,t)}else this.neighbours.push(t);this.neighbourCount++}},{key:"setParentVertexId",value:function(t){this.neighbourCount++,this.parentVertexId=t,this.neighbours.push(t)}},{key:"isTerminal",value:function(){return!!this.value.hasAttachedPseudoElements||(null===this.parentVertexId&&this.children.length<2||0===this.children.length)}},{key:"clone",value:function(){var e=new t(this.value,this.position.x,this.position.y);return e.id=this.id,e.previousPosition=new o(this.previousPosition.x,this.previousPosition.y),e.parentVertexId=this.parentVertexId,e.children=a.clone(this.children),e.spanningTreeChildren=a.clone(this.spanningTreeChildren),e.edges=a.clone(this.edges),e.positioned=this.positioned,e.angle=this.angle,e.forcePositioned=this.forcePositioned,e}},{key:"equals",value:function(t){return this.id===t.id}},{key:"getAngle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;return i=t?o.subtract(this.position,t):o.subtract(this.position,this.previousPosition),e?s.toDeg(i.angle()):i.angle()}},{key:"getTextDirection",value:function(t){var e=this.getDrawnNeighbours(t),i=Array();if(1===t.length)return"right";for(var r=0;r<e.length;r++)i.push(this.getAngle(t[e[r]].position));var n=s.meanAngle(i),a=Math.PI/2;return 2===(n=Math.round(Math.round(n/a)*a))?"down":-2===n?"up":0===n||-0===n?"right":3===n||-3===n?"left":"down"}},{key:"getNeighbours",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t)return this.neighbours.slice();for(var e=Array(),i=0;i<this.neighbours.length;i++)this.neighbours[i]!==t&&e.push(this.neighbours[i]);return e}},{key:"getDrawnNeighbours",value:function(t){for(var e=Array(),i=0;i<this.neighbours.length;i++)t[this.neighbours[i]].value.isDrawn&&e.push(this.neighbours[i]);return e}},{key:"getNeighbourCount",value:function(){return this.neighbourCount}},{key:"getSpanningTreeNeighbours",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=Array(),i=0;i<this.spanningTreeChildren.length;i++)void 0!==t&&t==this.spanningTreeChildren[i]||e.push(this.spanningTreeChildren[i]);return null!=this.parentVertexId&&(void 0!==t&&t==this.parentVertexId||e.push(this.parentVertexId)),e}},{key:"getNextInRing",value:function(t,e,i){for(var r=this.getNeighbours(),n=0;n<r.length;n++)if(a.contains(t[r[n]].value.rings,{value:e})&&r[n]!=i)return r[n];return null}}]),t}());t.exports=h},3897:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r},t.exports.__esModule=!0,t.exports.default=t.exports},5372:function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},3405:function(t,e,i){var r=i(3897);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},6690:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},9728:function(t,e,i){var r=i(4062);function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},4704:function(t,e,i){var r=i(6116);t.exports=function(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=r(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){h=!0,a=t},f:function(){try{o||null==i.return||i.return()}finally{if(h)throw a}}}},t.exports.__esModule=!0,t.exports.default=t.exports},9498:function(t){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},8872:function(t){t.exports=function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,s,a,o=[],h=!0,l=!1;try{if(s=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;h=!1}else for(;!(h=(r=s.call(i)).done)&&(o.push(r.value),o.length!==e);h=!0);}catch(u){l=!0,n=u}finally{try{if(!h&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(l)throw n}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports},2218:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},2281:function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},7424:function(t,e,i){var r=i(5372),n=i(8872),s=i(6116),a=i(2218);t.exports=function(t,e){return r(t)||n(t,e)||s(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},1589:function(t,e,i){var r=i(5372),n=i(9498),s=i(6116),a=i(2218);t.exports=function(t){return r(t)||n(t)||s(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},861:function(t,e,i){var r=i(3405),n=i(9498),s=i(6116),a=i(2281);t.exports=function(t){return r(t)||n(t)||s(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},5036:function(t,e,i){var r=i(8698).default;t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},4062:function(t,e,i){var r=i(8698).default,n=i(5036);t.exports=function(t){var e=n(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},8698:function(t){function e(i){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},6116:function(t,e,i){var r=i(3897);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}}]);
//# sourceMappingURL=641.83f0de27.chunk.js.map